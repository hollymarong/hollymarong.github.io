<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>marong blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="技术学习总结">
<meta property="og:type" content="website">
<meta property="og:title" content="marong blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="marong blog">
<meta property="og:description" content="技术学习总结">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="marong blog">
<meta name="twitter:description" content="技术学习总结">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">marong blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Less is more</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
  <a href="https://github.com/hollymarong"><img style="position: absolute; top: 0; right: 0; border: 0;z-index:2;" src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"></a>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-react-isomorphic" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/26/react-isomorphic/" class="article-date">
  <time datetime="2017-06-26T11:48:30.000Z" itemprop="datePublished">2017-06-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/26/react-isomorphic/">React同构</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><p>同构<br>React组件既可以在浏览器端渲染，也可以在服务器端渲染产生HTML，代码可以运行在不同的环境下，这种方式叫“同构”</p>
</li>
<li><p>服务端渲染<br>对于来自浏览器的HTTP请求，服务器通过访问存储器或者访问别的API服务等方式获得数据，然后根据数据渲染生成HTML返回给浏览器，浏览器只需要把HTML渲染出来。</p>
</li>
</ul>
<ul>
<li>优点<br>利于SEO<br>加速首屏渲染<br>大多数情况下，服务器获取数据比浏览器端获取数据要快</li>
<li>缺点<br>页面大小对性能的影响，如果服务器端产生的HTML过大，首页下载的HTML要比纯浏览器渲染要大，这样下载HTML的时间会增长，服务器渲染未必能获得更好的性能</li>
</ul>
<ul>
<li>浏览器端渲染<br>服务器返回的HTML只包含几个无内容的元素作为页面框架，网页中引用的JavaScript会直接访问API服务器来获取数据，取到的数据再结合模板来生成HTML字符串，插入到页面框架总，产生了用户最终看到的界面。<br>模板库的效率并不是很高，用户需要等待API请求成功之后才能看到第一条内容，反而让用户感觉更慢了，并没有提高用户体验。</li>
<li>完全浏览器渲染技术</li>
</ul>
<ul>
<li>各种应用框架,包含路由和应用结构功能</li>
<li>模板库</li>
<li><p>服务器端的API支持<br>传统的模板库就是DOM树的操作，将HTML字符串插入到网页中，无论如何优化都有它的极限。<br>React的Virtual DOM工作原理，配合生命周期函数的应用，性能不是字符串替换的模板库能够比拟的。<br>完全浏览器渲染的缺点：<br>首页性能,首页加载白屏问题<br>不利于SEO</p>
</li>
<li><p>React同构</p>
</li>
</ul>
<p>用户第一请求页面时候，node服务端做初始渲染，node服务端接受到请求后，把需要用的HTML渲染成HTML字符串，返回给客户端，之后，客户端接管渲染的控制权限</p>
<ul>
<li><p>NODE服务端渲染<br>Redux在客户端提供应用初始所需的state,客户端把服务端返回的state作为初始的state<br>发送响应前用ReactDOMServer.renderToString(el)渲染初始的HTML,渲染时会计算所生成HTML的校验和，并存放在根节点的属性data-react-checksum中<br>服务端最后一步就是把初始组件的HTML和初始state注入到客户端能够渲染的模板中。<br>state的传递通过script标签来吧preloadedState赋给window.<strong>INITIAL_STATE</strong><br>注入js bundle文件<br>客户端就可以通过window.<strong>INITITIAL</strong>STATE__来获取preloadedState,</p>
</li>
<li><p>浏览器客户端渲染<br>从window.<strong>INITIAL_STATE</strong>得到初始的state，并传递给createStore()<br>页面加载js后，打包JS启动，调用React.render()重新渲染一遍React组件，在重新计算DOM树之后，也会计算一遍校验和，和服务器的校验和做一个对比，如果二者相同，就没有必要做DOM操作了。然后会与服务端渲染的HTML的data-react-id属性做关联。这会把新生成的React实例与服务端的虚拟DOM连接起来。因为同样适用了来自Redux Store的初始state,并且view组件代码是一样的，结果就是我们得到了相同的DOM</p>
</li>
</ul>
<p>如果服务器端渲染和浏览器端渲染产生的内容不一致，用户会先看到服务器端渲染的内容，浏览器端生成的DOM树，覆盖掉服务器产生的HTML,用户会看到一次闪烁。<br>实现同构一定要保正服务器端和浏览器段渲染的结果一致。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/26/react-isomorphic/" data-id="cj4hy1peo000qdwx9w8eeknor" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iterm2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/23/iterm2/" class="article-date">
  <time datetime="2017-06-23T00:19:17.000Z" itemprop="datePublished">2017-06-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/23/iterm2/">iterm2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/23/iterm2/" data-id="cj4hy1ped000fdwx9kf18r7bc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-node-debug" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/18/node-debug/" class="article-date">
  <time datetime="2017-06-18T13:09:44.000Z" itemprop="datePublished">2017-06-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/18/node-debug/">NodeJs调试</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="node-inspect"><a href="#node-inspect" class="headerlink" title="node-inspect"></a>node-inspect</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node-debug index.js</div></pre></td></tr></table></figure>
<h2 id="chrome-devtools"><a href="#chrome-devtools" class="headerlink" title="chrome devtools"></a>chrome devtools</h2><p>node –inspect来调试，在需要调试的地方设置下debugger, 在chrome浏览器中，打开commandline中提示的调试地址<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">    &quot;start&quot;: &quot;node ./worker | bunyan&quot;,</div><div class="line">    &quot;debug&quot;: &quot;node --inspect --debug-brk  ./worker | bunyan&quot;,</div><div class="line">    &quot;lint&quot;: &quot;eslint . --fix &amp;&amp; echo &apos;Eslint Passed\\n&apos;&quot;,</div><div class="line">    &quot;test&quot;: &quot;eslint . --fix &amp;&amp; echo &apos;Eslint Passed\\n&apos; &amp;&amp; node test/ | faucet&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/18/node-debug/" data-id="cj4hy1pee000hdwx9nyv8lrfy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-react-start" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/16/react-start/" class="article-date">
  <time datetime="2017-06-16T03:33:27.000Z" itemprop="datePublished">2017-06-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/16/react-start/">react 入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h3><ul>
<li>报语法错误，最后排除发现，component里li元素的标签没有闭合</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/16/react-start/" data-id="cj4hy1per000zdwx9zkd40ui6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iterm-commandline" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/12/iterm-commandline/" class="article-date">
  <time datetime="2017-06-12T10:44:51.000Z" itemprop="datePublished">2017-06-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/12/iterm-commandline/">iterm-commandline</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>open index.html : 在 浏览器中打开页面<br>d 列出在会话访问的目录列表，输入列表前的序号，即可直接跳转</p>
<h2 id="oh-my-zsh-插件"><a href="#oh-my-zsh-插件" class="headerlink" title="oh-my-zsh 插件"></a>oh-my-zsh 插件</h2><p>在.zshrc文件中配置要加载的插件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plugins=(git autojump)</div></pre></td></tr></table></figure></p>
<h3 id="autojump"><a href="#autojump" class="headerlink" title="autojump"></a>autojump</h3><p>快速打开文件<br>在.zshrc,.bash_profile中添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[ -f /usr/local/etc/profile.d/autojump.sh ] &amp;&amp; . /usr/local/etc/profile.d/autojump.sh</div></pre></td></tr></table></figure></p>
<ul>
<li>用法<br>安装autojump之后，zsh会自动记录访问过的目录，目录名支持模糊匹配<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">j &lt;目录名&gt;</div><div class="line">j --stat 查看历史路径库</div></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/12/iterm-commandline/" data-id="cj4hy1pe90009dwx9ibuw1sbf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-algorithm-circle-matrix" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/07/algorithm-circle-matrix/" class="article-date">
  <time datetime="2017-06-07T01:38:01.000Z" itemprop="datePublished">2017-06-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/07/algorithm-circle-matrix/">回形矩阵算法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1   2  3 4<br>12 13 14 5<br>11 16 15 6<br>10 9  8  7<br>解决思路：<br>按圈进行循环,一个圈的循环包括从左上-右上，右上-右下，右下-左下，左下到左上,完成一圈数值的设定</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * @param &#123; Number &#125; m, 矩阵的宽</div><div class="line"> * @param &#123; Number &#125; n，矩阵的长</div><div class="line"> * @param &#123; Number &#125; initialValue，初始值</div><div class="line"> * @returns &#123; Array &#125; 数组</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildCyclicRectangle</span>(<span class="params">m, n, initialValue</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> result = [],</div><div class="line">        startM = <span class="number">0</span>,</div><div class="line">        endM = m<span class="number">-1</span>,</div><div class="line">        startN = n<span class="number">-1</span>,</div><div class="line">        endN = <span class="number">0</span>,</div><div class="line">        num = initialValue,</div><div class="line">        i;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</div><div class="line">        result[i] = [];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> isMLessEqualN = m &lt;= n;</div><div class="line">    <span class="keyword">if</span>(!m || !n) <span class="keyword">return</span> [];</div><div class="line">    <span class="keyword">if</span>(m == n &amp;&amp; (m == <span class="number">1</span>)) <span class="keyword">return</span> [[initialValue]];</div><div class="line"></div><div class="line">    <span class="comment">//当矩阵的m&lt;=n时，循环圈数根据m的值来判断</span></div><div class="line">    <span class="comment">//当矩阵的m&gt;n时，循环圈数根据n的值来判断</span></div><div class="line">    <span class="keyword">while</span>(isMLessEqualN &amp;&amp; (startM &lt; endM) || !isMLessEqualN &amp;&amp;(endN &lt; startN))&#123;</div><div class="line">        <span class="keyword">for</span>(i = startM; i &lt;= endM; i++)&#123;</div><div class="line">            result[startM][i] = num;</div><div class="line">            num++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(i = endN+<span class="number">1</span>; i &lt;= startN; i++)&#123;</div><div class="line">            result[i][endM] = num;</div><div class="line">            num++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(i = endM<span class="number">-1</span>; i&gt;= startM; i--)&#123;</div><div class="line">            result[startN][i] = num;</div><div class="line">            num++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(i = startN<span class="number">-1</span>; i &gt; endN; i--)&#123;</div><div class="line">            result[i][startM] = num;</div><div class="line">            num++;</div><div class="line">        &#125;</div><div class="line">        startM++;</div><div class="line">        endM--;</div><div class="line">        startN--;</div><div class="line">        endN++;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//当存在奇数列的情况</span></div><div class="line">    <span class="keyword">if</span>(isMLessEqualN &amp;&amp; startM == endM)&#123;</div><div class="line">        <span class="keyword">for</span>(i = endN; i &lt;= startN;i++)&#123;</div><div class="line">            result[i][startM] = num;</div><div class="line">            num++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//当存在奇数行的情况</span></div><div class="line">    <span class="keyword">if</span>(!isMLessEqualN &amp;&amp; startN == endN)&#123;</div><div class="line">        <span class="keyword">for</span>(i = startM; i &lt;= endM; i++)&#123;</div><div class="line">            result[startN][i] = num;</div><div class="line">            num++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> result = buildCyclicRectangle(<span class="number">10</span>,<span class="number">10</span>,<span class="number">1</span>);</div><div class="line"><span class="built_in">console</span>.log(result);</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/07/algorithm-circle-matrix/" data-id="cj4hy1pdt0001dwx9n92698w3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm/">algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mobile-one-pixel" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/03/mobile-one-pixel/" class="article-date">
  <time datetime="2017-06-03T08:12:28.000Z" itemprop="datePublished">2017-06-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/03/mobile-one-pixel/">移动端1px的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>移动端下，一般设置1px的边线，但在高清屏幕的手机中浏览时，会变粗，并没有显示1px。</p>
<ul>
<li>设备像素(物理像素)<br>设备像素又称物理像素，是显示设备中一个最微小的物理部件。每个像素可以根据操作系统设置自己的颜色和亮度。是固定不变的值</li>
<li>设备独立像素(device-independent pixel)<br>设备独立像素也称为密度无关像素，可以认为是计算机坐标系统中的一个点，这个点代表一个可以由程序使用的虚拟像素(比如CSS像素)，然后由相关系统转换为物理像素。</li>
<li>CSS像素<br>CSS像素是抽象的，可以收缩放放大,主要使用在浏览器山个。其面积随着浏览器的缩放比例而同步缩放</li>
<li>屏幕密度<br>是指一个设备表面上存在的像素数量，通常以每英寸有多少像素来计算(PPI).</li>
<li>devicePixelRatio 设备像素比<br>devicePixelRatio = 屏幕物理像素/设备独立像素(dips: device-indipendent pixels)<br>devicePixedlRatio为1时是普通显示屏，大于1时为高清显示屏<br>在Javascript中，可以通过window.devicePixelRatio获取当前设备的dpr<br>在CSS中，可以通过-webkit-device-pixel-ratio,-webkit-min-device-pir</li>
<li>viewport</li>
</ul>
<ul>
<li>visual viewport(视觉视口)<br>visual viewport = screen.width/initail-scale<br>320px宽的屏幕可以显示980px宽的内容<br>通过设置initial-scale的值可以设置visual viewport的宽度<br>visual viewport的宽度变化会影响layout viewport的变化<br>用户能看到的网站区域<br>window.innerWidth/window.innerHeight是获取视觉视口的尺寸</li>
<li>layout viewport(布局视口)<br>document.documentElement.clientWidth/document.clientHeight是获取布局视口的尺寸<br>默认情况下，layout viewport一般为980px<br><meta name="viewport" content="width=device-width"><br>设置布局视口的宽度为屏幕宽度<br>布局视口的宽度大于等于视觉视口</li>
<li>ideal viewport(理想视口)<br>布局视口的默认宽度并不一定是一个理想的宽度，它对设备来说是最理想的布局视口尺寸。只有主动地往页面中添加meta视口标签,理想视口才会生效。<br>window.screen.width/window.screen.height是理想视口的尺寸<br>当设备方向改变时，iphone的理想视口的尺寸值不会改变，andrio设备的理想视口的尺寸会发生改变<h2 id="1px变粗的原因"><a href="#1px变粗的原因" class="headerlink" title="1px变粗的原因"></a>1px变粗的原因</h2></li>
</ul>
<ul>
<li>CSS中的1px并不等于设备中的1px，不同的屏幕有不同的设备像素比<br>例如iphone4s 屏幕物理像素：640 设备独立像素：320,devicePixelRatio: 2, 1像素在iphone4s中会占4个物理像素，由四个像素点所绘制。<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="利用transform缩放"><a href="#利用transform缩放" class="headerlink" title="利用transform缩放"></a>利用transform缩放</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">//javascript 对于devicePixelRatio值为3的情况，不会特意设置，统一采用值为2的情况</div><div class="line">if(window.devicePixelRatio &amp;&amp; window.devicePixelRatio &gt;= 2) &#123;</div><div class="line">    document.querySelector('html').className = 'hd-screen';</div><div class="line">&#125;</div><div class="line">//css</div><div class="line">  .one-pixel&#123;</div><div class="line">      position:relative;</div><div class="line">      height:200px;</div><div class="line">  &#125;</div><div class="line">  .one-pixel:after&#123;</div><div class="line">      content:'';</div><div class="line">      position:absolute;</div><div class="line">      bottom:0;</div><div class="line">      left:0;</div><div class="line">      width:100%;</div><div class="line">      height: 1px;</div><div class="line">      background:#000;</div><div class="line">  &#125;</div><div class="line">  .hd-screen .one-pixel:after&#123;</div><div class="line">      transform: scaleY(0.5);</div><div class="line">      transform-origin: 0 0;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="利用viewport"><a href="#利用viewport" class="headerlink" title="利用viewport"></a>利用viewport</h3><p>把viewport的宽度设置为实际的设备物理宽度，css的1px就等于设备的1px<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> scale = <span class="number">1</span> / <span class="built_in">window</span>.devicePixelRatio;</div><div class="line"><span class="keyword">var</span> meta = <span class="built_in">document</span>.createElement(<span class="string">'meta'</span>);</div><div class="line">meta.setAttribute(<span class="string">"name"</span>, <span class="string">"viewport"</span>);</div><div class="line">meta.setAttribute(<span class="string">"content"</span>, <span class="string">"initial-scale="</span> + scale + <span class="string">", maximum-scale="</span> + scale + <span class="string">",minimum-scale="</span> + scale + <span class="string">",user-scale=no"</span>);</div></pre></td></tr></table></figure></p>
<h3 id="利用border-image"><a href="#利用border-image" class="headerlink" title="利用border-image"></a>利用border-image</h3><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://github.com/amfe/article/issues/17" target="_blank" rel="external">https://github.com/amfe/article/issues/17</a><br><a href="https://segmentfault.com/a/1190000008619063" target="_blank" rel="external">https://segmentfault.com/a/1190000008619063</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/03/mobile-one-pixel/" data-id="cj4hy1pel000pdwx993br9dyl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mobile/">Mobile</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-html-element" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/03/html-element/" class="article-date">
  <time datetime="2017-06-03T04:16:40.000Z" itemprop="datePublished">2017-06-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/03/html-element/">HTML5 Element类别和内容模型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>DOM中元素继承HTMLElement<br>自定义的元素继承HTMLUnknowElement<br>元素定义包含：</p>
<ul>
<li>类别(categories)<br>HTML中元素被分成不同的种类，有metadata content,flow content,sectioning content,headingcontent,phrasing content,embedded content,interactive content<br>metadata content:<br>元数据内容是设置描述或其他内容的行为，或设置文档和其他文档的关系，或传递信息。<br><base>,<link>,<meta>,<noscript>,<script>,<style>,<template>,<title><br>flow content:<br>大多数元素都属于flow content<br>sectioning content:<br>分节内容是定义headings和footers范围<br>article,aside,nav,section<br>heading content:<br>h1,h2,h3,h4,h5,h6<br>phrasing content:<br>定义文档的文本<br>phrasing content只能包含phrasing content分类的内容，不能是其他的flow content类型<br><a>,<area>,<audio>,<b>,<br>,<button>,<canvas>,<code>,<data>,<datalist>,<del>,<em>,<embed>,<i>,<iframe>,<img>,<input>,<ins>,<label>,<map>,<noscript>,<object>,<output>,<picture>,<progress>,<q>,<s>,<script>,<select>,<small>,<span>,<strong>,<sub>,<sup>,<svg>,<template>,<textarea>,<video><br>embedded content:<br>引入其他资源到文档中<br><audio>,<canvas>,<embed>,<iframe>,<img>,<math>,<object>,<picture>,<svg>,<video><br>interactive content:<br>特地用来用户交互的内容<br><a>,<audio>,<button>,<embed>,<iframe>,<img>,<input>,<label>,<textarea>,<video><br>palpable content<br>它的内容模型允许有至少一个flow content或phrasing content，它的内容都是显而易见的，没有隐藏的属性。<br>这并不是一个硬性的要求，在一些情况下内容可以为空，比如作为占位符出现随后脚本填充，或者是作为模板的一般分，在大多数页面中是有内容的，但在一些也页面中没有。<br><a>,<address>,<article>,<audio>,<b>,<blockquote>,<button>,<canvas>,<code>,<data>,<detail>,<div>,<dl>,<em>,<embed>,<fieldset>,<figure>,<footer>,<form>,<h1>,<h2>,<h3>,<h4>,<h5>,<h6>,<header>,<i>,<iframe>,<img>,<input>,<ins>,<label>,<main>,<nav>,<ol>,<p>,<q><s>,<section>,<select>,<small>,<span>,<strong>,<sub>,<svg>,<table>,<textarea>,<ul>,<video><br>script-supporting elements<br>不呈现内容，用来加载脚本，或为用户提供功能<br><script>,<template></li>
<li>内容模型(content-model):<br>所期望的内容类型，所能包含的子元素或后代元素的内容类型<br>有一些content-model为空的元素，可以省略end tag，如：<link>,<img>,<input>,<base>,<hr>,<meta>,<source><br>transparent<br><a>,<ins>,<map>,<param>,<object><br>一些元素的内容模型是transparent，transparent元素的内容模型取决它的父元素。<br>当一个transparent的元素没有父元素，它可以接受任意flow content元素<br><a><div></div></a><br>上面这种嵌套是合法的，a的content-model为transparent,div的categories为flow content，所以合法<br><p><a><div></div></a></p><br>上面这种嵌套是不合法的，<br>p元素的content-model是phrasing contet，a元素类别是phrasing content, 所以p内嵌套a<br>a元素的content-model是transparent，对于div的是否能嵌套需要看父元素p是否能嵌套div，p元素只能嵌套Phrasing content的元素，显然不能嵌套div.<br>它的content-model是transparent<br>元素查看地址：<a href="https://html.spec.whatwg.org/#the-a-element">https://html.spec.whatwg.org/#the-a-element</a><br>| element | categories                                                         | content model    |<br>| —     | —                                                                | —              |<br>| p       | Flow content Palpable content                                      | Phrasing content |<br>| a       | Flow content Phrasing content interactive content Palpable content | transparent      |<br>| div     | Flow content Palpable content                                      | flow content     |</li>
</ul>
</script></noscript></li></ul>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/03/html-element/" data-id="cj4hy1peb000bdwx9uyqtotft" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML/">HTML</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vuestart" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/27/vuestart/" class="article-date">
  <time datetime="2017-05-27T01:56:26.000Z" itemprop="datePublished">2017-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/27/vuestart/">Vue2.0入门使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>初始化项目<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># 全局安装 vue-cli</div><div class="line">$ npm install --global vue-cli</div><div class="line"># 创建一个基于 webpack 模板的新项目</div><div class="line">$ vue init webpack my-project</div><div class="line"># 安装依赖，走你</div><div class="line">$ cd my-project</div><div class="line">$ npm install</div><div class="line">$ npm run dev</div><div class="line">npm install --save vuex</div><div class="line">npm install --save sass-loader node-sass autoprefixer</div></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/05/27/vuestart/" data-id="cj4hy1pf5001ddwx9td1utnpl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MVVM-Vue/">MVVM Vue</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-jsEqualOperator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/22/jsEqualOperator/" class="article-date">
  <time datetime="2017-05-22T02:26:34.000Z" itemprop="datePublished">2017-05-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/22/jsEqualOperator/">Javascript相等操作符</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>相等操作符分为两种，一种是相等(==)和不相等(!=)，另一种是全等(===)和不全等(!==)。<br>相等和不相等操作符进行比较的时候，如果数据类型不相同，会强制类型转换，再进行比较<br>全等和不全等操作符进行比较的时候，不会进行类型转换，直接比较</p>
<p>不同数据类型转换规则</p>
<ul>
<li>布尔值转换为0或1</li>
<li>字符串和数字比较，字符串会转化为数字</li>
<li>对象和其他类型比较，对象会调用valueOf或toString方法，得到的基本类型值，按照之前转化规则进行转化后，比较</li>
<li>null和undefined是相等的, null和undefined不会转化为其他类型值</li>
<li>NaN 不等于NaN</li>
<li>如果两个对象比较，如果两个对象指向同一个对象，则相等，否则，不相等</li>
</ul>
<table>
<thead>
<tr>
<th>表达式</th>
<th>值</th>
<th>原因</th>
</tr>
</thead>
<tbody>
<tr>
<td>null == undefined</td>
<td>true</td>
<td></td>
</tr>
<tr>
<td>NaN == NaN</td>
<td>false</td>
<td>NaN不等于NaN</td>
</tr>
<tr>
<td>0 == false</td>
<td>true</td>
<td>false转换为0</td>
</tr>
<tr>
<td>1 == true</td>
<td>true</td>
<td>true转换为1</td>
</tr>
<tr>
<td>2 == true</td>
<td>true</td>
<td>true转换为1, 1不等于2</td>
</tr>
<tr>
<td>[] == false</td>
<td>true</td>
<td>[]调用toString转化为””,””字符串转换为0</td>
</tr>
<tr>
<td>[1] == 1</td>
<td>true</td>
<td>[1]调用toString转化为”1”,”1”字符串转换为1</td>
</tr>
<tr>
<td>[] == 0</td>
<td>true</td>
<td>[]调用toString转化为””,””字符串转换为0</td>
</tr>
<tr>
<td>{} == false</td>
<td>false</td>
<td>{}调用toString-&gt;”[object Object]”-&gt;NaN,false-&gt;0</td>
</tr>
<tr>
<td>{} == “[object Object]”</td>
<td>true</td>
<td>{}调用toString转换为”[object Object]”,</td>
</tr>
<tr>
<td>{} == 0</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>{} == false</td>
<td>false</td>
<td>{}调用toString-&gt;”[object Object]”-&gt;NaN, NaN==0</td>
</tr>
<tr>
<td>{} == {}</td>
<td>false</td>
<td>两个对象,分别保存在不同的内存地址中</td>
</tr>
<tr>
<td>[] == []</td>
<td>false</td>
<td>两个对象，分别保存在不同的内存地址中</td>
</tr>
<tr>
<td>[1] == [1]</td>
<td>false</td>
<td>两个对象,分别保存在不用的内存地址中</td>
</tr>
</tbody>
</table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">toString</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">10</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">obj == <span class="number">10</span> <span class="comment">//true</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">valueOf</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">20</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">obj == <span class="number">20</span> <span class="comment">// true</span></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">toString</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">10</span>;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">valueOf</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">20</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">obj == <span class="number">20</span> <span class="comment">//true</span></div></pre></td></tr></table></figure>
<p>由此可见，对象会先调用valueOf试图转换成基本类型值, 如转换不成会再尝试调用toString方法。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/05/22/jsEqualOperator/" data-id="cj4hy1pei000ldwx9crxrtu2l" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-cssMarginPaddingPercentage" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/22/cssMarginPaddingPercentage/" class="article-date">
  <time datetime="2017-05-22T02:25:46.000Z" itemprop="datePublished">2017-05-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/22/cssMarginPaddingPercentage/">CSS中百分比值</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>line-height</li>
<li>定位中的百分比<br>如果top|bottom|left|right的值为百分比<br>top|bottom根据包含块的高度计算百分比的值<br>left|right根据包含块的宽度计算百分比的值</li>
<li>margin|padding<br>行内元素margin|padding值,左右能设置，上下不能设置<br>如果元素的padding或margin值是百分比值，那么，它的值是根据父元素的宽度来计算的<br>可以利用此属性，用css实现自适应的正方形</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">//方案一:利用padding-top</div><div class="line">.square&#123;</div><div class="line">  width:100%;</div><div class="line">  padding-top:100%;</div><div class="line">  background:#000;</div><div class="line">&#125;</div><div class="line">//方案二:利用伪类</div><div class="line">.square3&#123;</div><div class="line">  width:20%;</div><div class="line">  background:yellow;</div><div class="line">&#125;</div><div class="line">.square3:after&#123;</div><div class="line">  content:'';</div><div class="line">  display:block;</div><div class="line">  padding-top:100%;</div><div class="line">&#125;</div><div class="line">.square4&#123;</div><div class="line">  width:20%;</div><div class="line">  background:green;</div><div class="line">  overflow:hidden;</div><div class="line">&#125;</div><div class="line">.square4:after&#123;</div><div class="line">  content:'';</div><div class="line">  display:block;</div><div class="line">  margin-top:100%;</div><div class="line">&#125;</div><div class="line">//方案三:利用vw单位</div><div class="line">.square&#123;</div><div class="line">  width:100vw;</div><div class="line">  height:100vw;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">'2000px'</span> <span class="attr">height</span>=<span class="string">'2000px'</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">//1.页面中这三个元素的宽高是多少，img能把a标签撑起来么，为什么</div><div class="line">//2.img设置position:absolute; top:10%;left:10%; img的位置，top/left的百分比是基于谁的</div><div class="line">//3.如果p设置position:relative;img的position:absolute; top:10%;left:10%; img的位置，top/left的百分比是基于谁的</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/05/22/cssMarginPaddingPercentage/" data-id="cj4hy1pe80008dwx9055axsp2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mac-commandline" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/10/mac-commandline/" class="article-date">
  <time datetime="2017-05-10T10:17:26.000Z" itemprop="datePublished">2017-05-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/10/mac-commandline/">mac-commandline</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="mac-os"><a href="#mac-os" class="headerlink" title="mac os"></a>mac os</h2><p>| keybinding           | operate                |<br>| command+Q            | 退出当前应用           |<br>| command+M            | 最小化当前应用         |<br>| command+T            | 切换当前窗口打开的应用 |<br>| command+H            | 快速隐藏当前应用       |<br>| command+Shift+Delete | 清除废纸篓             |<br>| Control + A          | 移动到行首             |<br>| Control + E          | 移动到行尾             |<br>| Control + B          | 向前移动一个字符       |<br>| Control + F          | 向后移动一个字符       |</p>
<h2 id="mac-command-line"><a href="#mac-command-line" class="headerlink" title="mac command-line"></a>mac command-line</h2><p>which tern //查看安装路径<br>top //显示所有进程<br>kill -9 pid //结束pid进程</p>
<h2 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -O http://.../.tar.gizp //下载文件到当前目录</div></pre></td></tr></table></figure>
<h2 id="terminal"><a href="#terminal" class="headerlink" title="terminal"></a>terminal</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cp -r fromPath/file destinationPath</div><div class="line">cp ~/test1/*.*  ~/test2/</div></pre></td></tr></table></figure>
<p>echo ‘eval “$(perl -I$HOME/lib/lib/perl5 -Mlocal::lib=$HOME/lib)”‘ &gt;&gt;~/.bashrc<br>echo ‘eval “$(perl -I$HOME/lib/lib/perl5 -Mlocal::lib=$HOME/lib)”‘ &gt;&gt;~/.zshrc</p>
<h2 id="chrome"><a href="#chrome" class="headerlink" title="chrome"></a>chrome</h2><p>| keybinding          | operate                  |<br>| command + Shift + T | 重新打开之前关闭的标签页 |<br>| command+ Option+I   | devtools                 |<br>| command + ,         | chrome 设置              |<br>| command + L         | 快速选中地址栏                  |</p>
<h2 id="alfred"><a href="#alfred" class="headerlink" title="alfred"></a>alfred</h2><ul>
<li>安装github</li>
</ul>
<p>下载workflow工作流，双击安装工作流，自动添加的alfred<br>生成一个token<br>gh-auth <your token=""></your></p>
<h2 id="登录远程服务器"><a href="#登录远程服务器" class="headerlink" title="登录远程服务器"></a>登录远程服务器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh root@47.91.156.125</div></pre></td></tr></table></figure>
<h2 id="查看本机IP"><a href="#查看本机IP" class="headerlink" title="查看本机IP"></a>查看本机IP</h2><p>ifconfig</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/05/10/mac-commandline/" data-id="cj4hy1pep000udwx94i11mydw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mac/">mac</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-perlstart" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/30/perlstart/" class="article-date">
  <time datetime="2017-04-30T10:23:48.000Z" itemprop="datePublished">2017-04-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/30/perlstart/">Perl入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>perl程序文件可以不带扩展名字，也可以plx为扩展名</li>
<li><p>查看perl的版本号</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">perl -v</div></pre></td></tr></table></figure>
</li>
<li><p>运行文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">perl hello.pl</div></pre></td></tr></table></figure>
</li>
<li><p>常用命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">perldoc CGI //查看CGI模块文档</div><div class="line">cpan <span class="_">-a</span> //列出所有已安装的模块</div></pre></td></tr></table></figure>
</li>
<li><p>mac os下安装local::lib模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// 先从seach.cpan.org下载local::lib模块</div><div class="line">//进入local-lib的安装包</div><div class="line">cd local-lib-2.000019/</div><div class="line">//默认安装到~/perl5</div><div class="line">perl Makefile.PL --bootstrap </div><div class="line">make test &amp;&amp; make install</div><div class="line">perl5 -Mlocal::lib=$HOME/lib)&quot;&apos; &gt;&gt;~/.zshrc</div><div class="line">echo &apos;eval &quot;$(perl -I$HOME/perl5/lib/perl5 -Mlocal::lib)&quot;&apos; &gt;&gt;~/.zshrc</div><div class="line">//重启shell</div></pre></td></tr></table></figure>
</li>
<li><p>使用模块</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">my</span> $name = <span class="string">"/usr/local/bin/perl/marong"</span>;</div><div class="line"><span class="keyword">my</span> $basename = basename $name;</div><div class="line"><span class="keyword">my</span> $dirname = dirname $name;</div><div class="line"><span class="keyword">print</span> <span class="string">"\$basename:$basename"</span>; <span class="regexp">//marong</span></div><div class="line"><span class="keyword">print</span> <span class="string">"\$dirname:$dirname"</span>; <span class="regexp">//</span><span class="string">'/usr/local/bin/perl'</span></div></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/30/perlstart/" data-id="cj4hy1pek000ndwx98ynyfzgm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Perl/">Perl</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-box-model" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/26/box-model/" class="article-date">
  <time datetime="2017-04-26T06:29:45.000Z" itemprop="datePublished">2017-04-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/26/box-model/">box-model</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>怪异模式下盒模型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">width:10px;</div><div class="line">height:10px;</div><div class="line">padding:10px;</div></pre></td></tr></table></figure></p>
<p>盒子在页面中的占位</p>
<h3 id="CSS-module-怎么实现"><a href="#CSS-module-怎么实现" class="headerlink" title="CSS-module 怎么实现"></a>CSS-module 怎么实现</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/26/box-model/" data-id="cj4hy1pe40004dwx9801jhog8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-deepcopy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/26/deepcopy/" class="article-date">
  <time datetime="2017-04-26T06:29:23.000Z" itemprop="datePublished">2017-04-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/26/deepcopy/">deepcopy</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h2><h2 id="深度拷贝"><a href="#深度拷贝" class="headerlink" title="深度拷贝"></a>深度拷贝</h2><h3 id="深度拷贝循环引用的问题"><a href="#深度拷贝循环引用的问题" class="headerlink" title="深度拷贝循环引用的问题"></a>深度拷贝循环引用的问题</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">obj.a = obj;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/26/deepcopy/" data-id="cj4hy1pe60005dwx9ma6glsvs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-prototype" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/24/prototype/" class="article-date">
  <time datetime="2017-04-24T00:12:45.000Z" itemprop="datePublished">2017-04-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/24/prototype/">prototype</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>构造函数，原型，实例的关系：每个构造函数都有一个原型对象，原型对象都包含一个指向构造函数的指针，实例都包含一个指向原型对象的内部指针。<br>原型链：一个对象的原型等于另一个对象的实例，此时原型对象将包含一个指向另一个原型的指针，层层递进，构成了实例与原型之间的链条，这就是原型链。<br>继承：依靠原型链来实现的。</p>
<ol>
<li><p>原型链继承<br>很少单独使用<br>缺点：最主要的问题来自包含引用类型值的原型会被所有实例共享;创建子类型的实例时，不能向超类型传递参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.colors = [<span class="string">'red'</span>, <span class="string">'blue'</span>, <span class="string">'green'</span>];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>)</span>&#123;</div><div class="line">&#125;</div><div class="line">SubType.protoype = <span class="keyword">new</span> SuperType();</div><div class="line"><span class="keyword">var</span> instance1 = <span class="keyword">new</span> SubType();</div><div class="line">instance1.colors.push(<span class="string">'black'</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'colors'</span>, instance1.colors); <span class="comment">//['red', 'blue', 'green', 'black']</span></div><div class="line"><span class="keyword">var</span> instance2 = <span class="keyword">new</span> SubType();</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'colors'</span>, instance2.colors); <span class="comment">//['red', 'blue', 'green', 'black']</span></div></pre></td></tr></table></figure>
</li>
<li><p>(经典继承)借用构造函数继承<br>很少单独使用<br>在子类构造函数的内部调用超类构造函数,解决引用类型共享的问题；可传递参数<br>缺点：无法实现函数的复用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">    <span class="keyword">this</span>.colors = [<span class="string">'red'</span>, <span class="string">'blue'</span>, <span class="string">'green'</span>];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    SuperType.call(<span class="keyword">this</span>, name);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> instance1 = <span class="keyword">new</span> SubType();</div><div class="line">instance1.colors.push(<span class="string">'black'</span>); <span class="comment">//['red', 'blue', 'green', 'black']</span></div><div class="line"><span class="built_in">console</span>.log(instance1);</div><div class="line"><span class="keyword">var</span> instance2 = <span class="keyword">new</span> SubType();</div><div class="line"><span class="built_in">console</span>.log(instance2);</div></pre></td></tr></table></figure>
</li>
<li><p>组合继承(原型链和借用构造函数的组合)<br>将原型链和借用构造函数的技术组合到一块，使用原型链实现对原型属性和方法的继承，通过借用构造行数来实现对实例属性的继承,既通过在原型上定义方法实现了函数复用，又能保证每个实例儿都有自己的属性<br>常用的继承模式<br>缺点： 无论什么情况下，都会调用两次超类型构造函数</p>
</li>
<li><p>原型式继承(同ECMAScript的Object.create)<br>基于已有的对象，借助原型创建新对象<br>应用场景：只想让一个对象与另一个对象保持类似的情况下。<br>缺点：包含引用类型的值会共享</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">```</div><div class="line">5. 寄生式继承</div><div class="line">创建一个仅用于封装继承过程的函数，任何能够返回新对象的函数都适用于此模式</div><div class="line">缺点：不能做到函数的复用</div><div class="line">```javascript</div></pre></td></tr></table></figure>
</li>
<li><p>寄生组合式继承<br>最常用的继承模式<br>借用构造函数来继承属性，通过原型链来继承方法。<br>与组合式继承相比,它只调用了一次SuperType构造行数，并且因此避免了在SubType.prototype上创建不必要的，多余的属性。寄生组合式继承是引用类型最理想的继承方式</p>
<pre><code class="javascript">
</code></pre>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/24/prototype/" data-id="cj4hy1pep000tdwx9tnux1t77" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sort" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/19/sort/" class="article-date">
  <time datetime="2017-04-19T10:46:36.000Z" itemprop="datePublished">2017-04-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/19/sort/">Javascript排序算法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>算法的稳定性<br>所有相等的数经过算法的排序之后，仍能保持他们在排序之前的相对次序，这种排序算法是稳定的，反之，是不稳定的。</li>
<li>算法的时间复杂度<br>是指执行算法所需要的计算工作量</li>
<li>算法的空间复杂度<br>是指执行算法所需要的内存空间</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">算法</th>
<th style="text-align:left">时间复杂度</th>
<th style="text-align:left">空间复杂度</th>
<th style="text-align:left">稳定性</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">冒泡排序</td>
<td style="text-align:left">O(n) O(n*n)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">稳定</td>
</tr>
<tr>
<td style="text-align:left">选择排序</td>
<td style="text-align:left">O(n<em>n) O(n</em>n)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">不稳定</td>
</tr>
<tr>
<td style="text-align:left">插入排序</td>
<td style="text-align:left">O(n) O(n*n)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">稳定</td>
</tr>
<tr>
<td style="text-align:left">希尔排序</td>
<td style="text-align:left">O(n) O(n log^2 n)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">不稳定</td>
</tr>
<tr>
<td style="text-align:left">归并排序</td>
<td style="text-align:left">O(n) O(n log n)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">稳定</td>
</tr>
<tr>
<td style="text-align:left">快速排序</td>
<td style="text-align:left">O(n log n)  O(n log n)</td>
<td style="text-align:left">O(n log n)</td>
<td style="text-align:left">不稳定</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="冒泡排序-是最慢的一种排序"><a href="#冒泡排序-是最慢的一种排序" class="headerlink" title="冒泡排序,是最慢的一种排序"></a>冒泡排序,是最慢的一种排序</h3><ul>
<li>原理：比较相邻的数据，根据排序要求进行互换。如按升序排，较大的数会移动的右侧，较小的数会移到左侧。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> aa = [];</div><div class="line">    <span class="keyword">var</span> nums = <span class="number">10</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; nums; i++)&#123;</div><div class="line">        aa[i] = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()* nums + <span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, index1, index2</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> tmp = arr[index1];</div><div class="line">        arr[index1] = arr[index2];</div><div class="line">        arr[index2]= tmp;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 冒泡排序</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">bubbleSort</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> len = arr.length;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> outer = len <span class="number">-1</span>; outer &gt;= <span class="number">0</span>; outer--) &#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> inner = <span class="number">0</span>; inner &lt; outer; inner ++)&#123;</div><div class="line">                <span class="keyword">if</span>(arr[inner] &gt; arr[inner + <span class="number">1</span>])&#123;</div><div class="line">                    swap(arr, inner ,inner + <span class="number">1</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> arr;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> start  = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'排序2前'</span>, aa);</div><div class="line">    bubbleSort(aa);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'排序后'</span>, aa);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'冒泡排序消耗时间: '</span>, +<span class="keyword">new</span> <span class="built_in">Date</span> - start);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<h3 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h3><p>原理：外循环将数组元素挨个移动，内循环从循环中选中元素的下一个元素开始比较。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> aa = [];</div><div class="line">    <span class="keyword">var</span> nums = <span class="number">10</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; nums; i++)&#123;</div><div class="line">        aa[i] = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()* nums + <span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, index1, index2</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> tmp = arr[index1];</div><div class="line">        arr[index1] = arr[index2];</div><div class="line">        arr[index2]= tmp;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">selectionSort</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> len = arr.length;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> outer = <span class="number">0</span>; outer &lt; len; outer++)&#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> inner = outer+<span class="number">1</span>; inner &lt; len; inner++)&#123;</div><div class="line">                <span class="keyword">if</span>(arr[outer] &gt; arr[inner])&#123;</div><div class="line">                    swap(arr, outer, inner);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 选择排序</span></div><div class="line">    <span class="keyword">var</span> start  = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'排序前'</span>, aa);</div><div class="line">    selectionSort(aa);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'排序后'</span>, aa);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'选择排序消耗时间: '</span>, +<span class="keyword">new</span> <span class="built_in">Date</span> - start);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><p>原理：外循环将数组元素挨个移动，内循环对外循环中的元素和它前面的元素进行比较。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> aa = [];</div><div class="line">    <span class="keyword">var</span> nums = <span class="number">10</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; nums; i++)&#123;</div><div class="line">        aa[i] = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()* nums + <span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, index1, index2</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> tmp = arr[index1];</div><div class="line">        arr[index1] = arr[index2];</div><div class="line">        arr[index2]= tmp;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">insertSort</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> len = arr.length;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> outer = <span class="number">0</span>; outer &lt; len; outer++)&#123;</div><div class="line">            <span class="keyword">var</span> inner  = outer;</div><div class="line">            <span class="keyword">while</span>(inner &amp;&amp; arr[inner] &lt; arr[inner - <span class="number">1</span>]) &#123;</div><div class="line">                swap(arr, inner ,inner <span class="number">-1</span>);</div><div class="line">                inner --;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 插入排序</span></div><div class="line">    <span class="keyword">var</span> start  = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'排序前'</span>, aa);</div><div class="line">    insertSort(aa);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'排序后'</span>, aa);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'插入排序消耗时间: '</span>, +<span class="keyword">new</span> <span class="built_in">Date</span> - start);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<h3 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h3><p>原理：通过定义一个间隔序列，根据间隔序列来比较元素，间隔的值会不断减小。</p>
<ul>
<li><p>固定间隔</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"><span class="keyword">var</span> aa = [];</div><div class="line"><span class="keyword">var</span> nums = <span class="number">10</span>;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; nums; i++)&#123;</div><div class="line">aa[i] = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()* nums + <span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, index1, index2</span>)</span>&#123;</div><div class="line"><span class="keyword">var</span> tmp = arr[index1];</div><div class="line">arr[index1] = arr[index2];</div><div class="line">arr[index2]= tmp;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> gaps  = [<span class="number">5</span>, <span class="number">3</span>,<span class="number">1</span>];</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">shellSort</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line"><span class="keyword">var</span> len = arr.length;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> g = <span class="number">0</span>; g &lt; gaps.length; g++)&#123;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> outer = g; outer &lt; len; outer++)&#123;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> inner = outer; inner &gt;= g &amp;&amp; arr[inner] &lt; arr[inner -g]; inner -= g)&#123;</div><div class="line">swap(arr, inner ,inner-g);</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> start  = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'排序前'</span>, aa);</div><div class="line">shellSort(aa);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'排序后'</span>, aa);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'希尔排序消耗时间: '</span>, +<span class="keyword">new</span> <span class="built_in">Date</span> - start);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
</li>
<li><p>动态间隔</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> aa = [];</div><div class="line">    <span class="keyword">var</span> nums = <span class="number">10</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; nums; i++)&#123;</div><div class="line">        aa[i] = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()* nums + <span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, index1, index2</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> tmp = arr[index1];</div><div class="line">        arr[index1] = arr[index2];</div><div class="line">        arr[index2]= tmp;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">shellSortByDynamic</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> len = arr.length;</div><div class="line">        <span class="keyword">var</span> g = <span class="number">1</span>;</div><div class="line">        <span class="keyword">while</span>(g &lt; len / <span class="number">3</span>)&#123;</div><div class="line">            g = <span class="number">3</span> * g + <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">while</span>(g &gt;= <span class="number">1</span>)&#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> outer = g; outer &lt; len; outer++)&#123;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">var</span> inner = outer; inner &gt;=g &amp;&amp; arr[inner] &lt; arr[inner -g]; inner -= g)&#123;</div><div class="line">                    swap(arr, inner ,inner - g);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            g = (g - <span class="number">1</span>) / <span class="number">3</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 动态希尔排序</span></div><div class="line">    <span class="keyword">var</span> start  = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'排序前'</span>, aa);</div><div class="line">    shellSortByDynamic(aa);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'排序后'</span>, aa);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'动态希尔排序消耗时间: '</span>, +<span class="keyword">new</span> <span class="built_in">Date</span> - start);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h3><p>原理：将数据分解为一组只有一个元素的数组，然后通过创建一组左右子数组将他们慢慢排序合并。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"><span class="keyword">var</span> aa = [];</div><div class="line"><span class="keyword">var</span> nums = <span class="number">10</span>;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; nums; i++)&#123;</div><div class="line">aa[i] = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()* nums + <span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">mergeSort</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line"><span class="keyword">var</span> len = arr.length;</div><div class="line"><span class="keyword">if</span>(len &lt; <span class="number">2</span>) <span class="keyword">return</span>;</div><div class="line"><span class="keyword">var</span> step = <span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> left, right;</div><div class="line"><span class="keyword">while</span>(step &lt; len)&#123;</div><div class="line">left = <span class="number">0</span>;</div><div class="line">right = step;</div><div class="line"><span class="keyword">while</span>(right + step &lt;= len)&#123;</div><div class="line">mergeArrays(arr, left, left+step, right, right+step);</div><div class="line">left = right + step;</div><div class="line">right = left + step;</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span>(right &lt; len)&#123;</div><div class="line">mergeArrays(arr, left, left+step, right, len);</div><div class="line">&#125;</div><div class="line">step *= <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">mergeArrays</span>(<span class="params">arr, leftStart, leftStop, rightStart, rightStop</span>)</span>&#123;</div><div class="line"><span class="keyword">var</span> leftArr = <span class="keyword">new</span> <span class="built_in">Array</span>(leftStop - leftStart + <span class="number">1</span>);</div><div class="line"><span class="keyword">var</span> rightArr = <span class="keyword">new</span> <span class="built_in">Array</span>(rightStop - rightStart + <span class="number">1</span>);</div><div class="line"><span class="keyword">var</span> k = leftStart;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; leftStop-leftStart; i++)&#123;</div><div class="line">leftArr[i] = arr[k];</div><div class="line">k++</div><div class="line">&#125;</div><div class="line">k = rightStart;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; rightStop-rightStart; i++)&#123;</div><div class="line">rightArr[i] = arr[k];</div><div class="line">k++;</div><div class="line">&#125;</div><div class="line">leftArr[leftArr.length <span class="number">-1</span>] = <span class="literal">Infinity</span>;</div><div class="line">rightArr[rightArr.length - <span class="number">1</span>] = <span class="literal">Infinity</span>;</div><div class="line"><span class="keyword">var</span> l = <span class="number">0</span>;</div><div class="line"><span class="keyword">var</span> r = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = leftStart; i &lt; rightStop;i++)&#123;</div><div class="line"><span class="keyword">if</span>(leftArr[l] &lt;= rightArr[r])&#123;</div><div class="line">arr[i] = leftArr[l];</div><div class="line">l++</div><div class="line">&#125;<span class="keyword">else</span> &#123;</div><div class="line">arr[i] = rightArr[r];</div><div class="line">r++;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 归并排序</span></div><div class="line"><span class="keyword">var</span> start  = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'排序前'</span>, aa);</div><div class="line">mergeSort(aa);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'排序后'</span>, aa);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'归并排序消耗时间: '</span>, +<span class="keyword">new</span> <span class="built_in">Date</span> - start);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><p>原理：在列表中选择一个元素作为基准值，列表中小于基准值的元素移动到左边，大于基准值的元素移动的右边，递归调用,合并左数组、基准值、有数组并返回。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> aa = [];</div><div class="line">    <span class="keyword">var</span> nums = <span class="number">10</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; nums; i++)&#123;</div><div class="line">        aa[i] = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()* nums + <span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> len = arr.length;</div><div class="line">        <span class="keyword">if</span>(arr &amp;&amp; len == <span class="number">0</span>)&#123;</div><div class="line">            <span class="keyword">return</span> [];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> point = arr[<span class="number">0</span>];</div><div class="line">        <span class="keyword">var</span> left = [];</div><div class="line">        <span class="keyword">var</span> right = [];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i&lt; len; i++)&#123;</div><div class="line">            <span class="keyword">if</span>(arr[i] &lt; point)&#123;</div><div class="line">                left.push(arr[i]);</div><div class="line">            &#125;<span class="keyword">else</span> &#123;</div><div class="line">                right.push(arr[i]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> quickSort(left).concat(point, quickSort(right));</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 快速排序</span></div><div class="line">    <span class="keyword">var</span> start  = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'排序前'</span>, aa);</div><div class="line">    aa = quickSort(aa);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'排序后'</span>, aa);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'快速排序消耗时间: '</span>, +<span class="keyword">new</span> <span class="built_in">Date</span> - start);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>当数组长度为1000时，以上排序算法消耗时间为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">JavaScript内置sort排序消耗时间: 3</div><div class="line">冒泡排序消耗时间:  4</div><div class="line">选择排序消耗时间:  3</div><div class="line">插入排序消耗时间:  2</div><div class="line">希尔排序消耗时间:  2</div><div class="line">动态希尔排序消耗时间:  1</div><div class="line">归并排序消耗时间:  2</div><div class="line">快速排序消耗时间:  2</div></pre></td></tr></table></figure></p>
<p>当数组长度为10000时，以上排序算法消耗时间为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">JavaScript内置sort排序消耗时间:  16</div><div class="line">冒泡排序消耗时间:  180</div><div class="line">选择排序消耗时间:  228</div><div class="line">插入排序消耗时间:  57</div><div class="line">希尔排序消耗时间:  58</div><div class="line">动态希尔排序消耗时间:  3</div><div class="line">归并排序消耗时间:  4</div><div class="line">快速排序消耗时间:  16</div></pre></td></tr></table></figure></p>
<h4 id="当数据量较大的时候，希尔排序，归并排序，快速排序，速度较快。"><a href="#当数据量较大的时候，希尔排序，归并排序，快速排序，速度较快。" class="headerlink" title="当数据量较大的时候，希尔排序，归并排序，快速排序，速度较快。"></a>当数据量较大的时候，希尔排序，归并排序，快速排序，速度较快。</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/19/sort/" data-id="cj4hy1pew0014dwx9pqrtgfvw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm/">algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-closure" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/11/closure/" class="article-date">
  <time datetime="2017-04-10T23:50:36.000Z" itemprop="datePublished">2017-04-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/11/closure/">闭包</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>堆<br>堆是一种无序的数据结构，数据的存取方式根据引用直接获取，现实生活中常见的堆的例子：书架与书。</li>
<li>栈<br>栈是一种高效的数据结构，只能在栈顶添加或删除数据，是一种后入先出(LIFO, last-in-first-out)的数据结构。现实生活常见的栈的例子：摞盘子。<br>JavaScript没有严格意义上区分堆内存和栈内存。在JavaScript的执行环境在逻辑上实现了堆栈。<br>执行环境中的变量对象保存在堆内存中。<br>基础数据类型存储在栈内存中，基础数据类型是按值访问的，可以直接操作保存在变量终端额实际值。<br>引用数据类型的值是保存在堆内存中，引用类型的值是按引用访问的，不允许直接访问对内存中的位置，操作对象时实际是操作的对象的引用。</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">比较</th>
<th style="text-align:left">栈内存</th>
<th style="text-align:left">堆内存</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">存储数据类型</td>
<td style="text-align:left">基础数据类型</td>
<td style="text-align:left">引用数据类型</td>
</tr>
<tr>
<td style="text-align:left">存储值</td>
<td style="text-align:left">大小固定</td>
<td style="text-align:left">大小不固定，可动态调整</td>
</tr>
<tr>
<td style="text-align:left">内存分配</td>
<td style="text-align:left">编译器自动分配释放</td>
<td style="text-align:left">程序分配</td>
</tr>
<tr>
<td style="text-align:left">用途</td>
<td style="text-align:left">主要用来执行程序</td>
<td style="text-align:left">主要用来存放对象</td>
</tr>
<tr>
<td style="text-align:left">特点</td>
<td style="text-align:left">空间小，运行效率高</td>
<td style="text-align:left">空间大，运行效率相对较低</td>
</tr>
<tr>
<td style="text-align:left">存取方式</td>
<td style="text-align:left">先进后出，后进先出</td>
<td style="text-align:left">无序存储，可根据引用直接获取</td>
</tr>
</tbody>
</table>
<ul>
<li>调用栈</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">function printCallStack() &#123;</div><div class="line">    var i = 0;</div><div class="line">    var fun = arguments.callee;</div><div class="line">    do &#123;</div><div class="line">        fun = fun.arguments.callee.caller;</div><div class="line">        console.log(++i + &apos;: &apos; + fun);</div><div class="line">    &#125; while (fun);</div><div class="line">&#125;</div><div class="line"></div><div class="line">function c() &#123;</div><div class="line">    console.log(&apos;c&apos;);</div><div class="line">    printCallStack();</div><div class="line">&#125;</div><div class="line"></div><div class="line">function b() &#123;</div><div class="line">    console.log(&apos;b&apos;);</div><div class="line">    c();</div><div class="line">&#125;</div><div class="line"></div><div class="line">function a() &#123;</div><div class="line">    console.log(&apos;a&apos;);</div><div class="line">    b();</div><div class="line">&#125;</div><div class="line"></div><div class="line">a();</div></pre></td></tr></table></figure>
<ul>
<li>执行环境(execution context)<br>JavaScript执行环境定义了变量或函数有权访问的其他数据，决定了它们各自的行为。<br>每个执行环境都有一个与之关联的变量对象(variable object),环境中定义的所有变量和函数都保存在这个对象中，我们编写的代码无法访问这个对象，但解析器在处理数据的时候会再后台使用它。<br>某个执行环境中的所有代码执行完毕后，该环境被销毁，保存在其中的所有变量和函数定义也随之销毁.全局执行环境是最外围的一个执行环境（全局执行环境直到应用程序推出才会被销毁）。<br>JavaScript程序的执行流的机制: 每个函数都有自己的执行环境，当执行流进入一个函数时，函数的环境就会被推入到一个环境栈中，当函数执行之后，栈将其环境弹出，把控制权返回给之前的执行环境。</li>
<li>作用域链(scope chain)：<br>当代码在一个环境中执行时，会创建变量对象的一个作用域链。作用域链的用途，是保证对执行环境有权访问的所有变量和函数的有序访问。<br>作用域链的前端，始终是当前执行的代码所在环境的变量对象,作用域链中的下一个变量来自包含环境，一直延续到全局执行环境，全局执行环境的变量对象始终是作用域链中的最后一个对象。<br>标识符解析是沿着作用域链一级一级地搜索标识符的过程。搜索过程始终从作用域链的前端开始，然后逐级向后，直到找到标识符为止(如果找不到标识符，通常会导致错误发生).<br>延长作用域链的两种情况：</li>
<li>with语句</li>
<li>try/catch语句中catch语句</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildUrl</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> qs = <span class="string">"?debug=true"</span>;</div><div class="line">    <span class="keyword">with</span>(location)&#123;</div><div class="line">        <span class="keyword">var</span> url = href + qs;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> url;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>with语句接收location对象，with语句的变量对象里包含了location对象,with语句引用href时，引用的是location.href</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">lengthenScopeChain</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">try</span>&#123;</div><div class="line">        <span class="keyword">var</span> dd = <span class="number">2</span>;</div><div class="line">        <span class="keyword">throw</span> <span class="string">'create error'</span>;</div><div class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'dd inner catch'</span>,dd);  <span class="comment">// 2</span></div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'e'</span>, e); <span class="comment">// create error</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'dd outer'</span>,dd); <span class="comment">// 2</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'e outer'</span>, e);  <span class="comment">//报错，e is not defined</span></div><div class="line">&#125;</div><div class="line">lengthenScopeChain();</div></pre></td></tr></table></figure>
<p>catch语句接收e对象，catch语句的变量对象里包含了e对象</p>
<ul>
<li>作用域</li>
</ul>
<ol>
<li><p>块级作用域<br>在一些类似C语言的编程语言中，花括号内的每一段代码都具有各自的作用域，而且变量在声明它们的代码段之外是不可见的，我们称为块级作用域。</p>
</li>
<li><p>javascript函数作用域<br>JavaScript中没有块级作用域，Javascript使用了函数作用域，就是函数的执行环境：变量在声明它们的函数体内以及这个函数体嵌套的任意函数体内都是有定义的。<br>Javascript的函数作用域是指在函数内声明的所有变量在函数体内始终是可见的,这意味着变量在声明之前甚至已经可用，Javascript的这个特性被非正式地称为申明提前,即Javascript函数里声明的所有变量(但不涉及赋值)都被提前至函数体的顶部,函数声明提前这步操作是在Javscript引擎预编译时进行的，是在代码开始运行之前。<br>在函数体内，局部变量的优先级高于同名的全局变量。<br>如果在函数声明的一个局部变量或者函数参数中带有的变量和全局变量重名，局部变量会覆盖全局变量</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//函数内的变量会覆盖同名的全局变量</span></div><div class="line"><span class="keyword">var</span> name = <span class="string">'global'</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkScope</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(name);</div><div class="line">    <span class="keyword">var</span> name = <span class="string">'local'</span>;</div><div class="line">&#125;</div><div class="line">checkScope() <span class="comment">//undefined</span></div><div class="line"></div><div class="line"><span class="comment">//函数内的参数会覆盖同名的全局变量</span></div><div class="line"><span class="keyword">var</span> name = <span class="string">'global'</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkScope</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(name);</div><div class="line">&#125;</div><div class="line">checkScope(); <span class="comment">//undefined</span></div></pre></td></tr></table></figure>
<ul>
<li>作用域链</li>
</ul>
<p>闭包就是内部函数可以访问定义他们的外部函数的变量和参数(除了this，arguments),也就是函数可以访问存在于该函数声明时的作用域内的变量和函数。<br>特点：</p>
<ol>
<li>闭包可以访问函数声明时所在作用域内的变量和函数</li>
<li>即使外部函数已经返回，当前函数仍然可以引用外部函数所定义的变量</li>
<li>闭包可以更新外部变量的值，闭包存储的是外部变量的引用.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">scope</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> value;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">get</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> value;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">set</span>: <span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>) </span>&#123;</div><div class="line">            value = newValue;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> obj = scope();</div><div class="line">obj.get(); <span class="comment">//undefined</span></div><div class="line">obj.set(<span class="string">'marong'</span>);</div><div class="line">obj.get(); <span class="comment">//marong</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>优点：<br>1.避免全局变量的污染<br>2.减少代码的数量和复杂性<br>缺点：<br>1.会比其他函数占内存。<br>由于闭包会携带包含它的函数的作用域，因此会比其他函数占用更多的内存。</p>
<ul>
<li>内存</li>
<li>内存的声明周期</li>
</ul>
<ol>
<li>分配你所需要的内存</li>
<li>使用分配到的内存（读，写）</li>
<li>不需要是将其释放\归还</li>
</ol>
<ul>
<li>Javascript垃圾回收机制<br>JavaScript具有自动垃圾回收机制，执行环境会负责管理代码执行过程中使用的内存,开发人员不用关心内存的使用问题，所需内存的分配以及无用内存的回收完全实现了自动管理。这种垃圾收集机制的原理：找到那些不再继续使用的变量，然后释放其占用的内存。垃圾回收器会按照固定的时间间隔，周期性的执行这一操作。<br>局部变量的生命周期，局部变量只在函数执行的过程中存在，在这个过程中，会为局部变量在堆或栈内存上分配相应空间，以便存储它们的值，然后在函数中使用这些变量，函数运行结束后，判断局部变量是否有用,无用变量进行标识，以备将来回收。<br>浏览器中标识无用变量的策略，通常有两种。</li>
</ul>
<ol>
<li>标记清除<br>JavaScript中最常用的垃圾收集方式是标记清除(mark-and-sweep)。当变量进入环境是，将这个变量标记为“进入环境”,当变量离开环境时，将其标记为“离开环境”。垃圾收集器在运行的时候会给内存种所有的变量都加上标记，然后它会去掉环境中的变量，根据标记删除无用变量，回收它们占用的内存空间。<br>IE， Firefox,Opera,Chrome Safari的Javascript实现使用的是标记清除式的垃圾收集策略，垃圾收集的时间间隔不同。</li>
<li>引用计数<br>引用计数的含义是跟踪记录每个值被引用的次用。当声明了一个变量并将一个引用类型值赋给该变量时，则这个值的引用次数就是1，如果同一个值又被赋给另一个变量，则该值的引用次数加1。相反，如果包含对这个值引用的变量又取得了另外一个值，则这个值的引用次数减1.当这个值的引用次数变成0时。当垃圾收集器运行时，释放引用次数为0的值所占用的内存。<br>引用计数的策略在循环引用的时候，会出现问题。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">function problem()&#123;</div><div class="line">    var objA = new Object();</div><div class="line">    var objB  = new Object();</div><div class="line">    objA.someOther = objB;</div><div class="line">    objB.someOther = objA;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>当函数执行完成之后，objA,objB的引用次数都为2，垃圾回收器无法回收，如果这个函数被多次调用，就会导致大量内存得不到回收。为此，Netscape在Navigator4.0中放弃了引用计数的策略，使用标记清除的策略。<br>IE中有些对象不是原生的Javascript，其中BOM/DOM对象是使用C++以COM(Component Object Model, 组件对象模型)形式实现的。COM对象的垃圾收集策略采用的引用计数的方式，只要在IE中设计到COM，就会存在循环引用的问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var element = document.getElementById(&apos;some&apos;);</div><div class="line">var obj = new Object();</div><div class="line">obj.element = element;</div><div class="line">element.someobj = obj;</div></pre></td></tr></table></figure>
<p>即使DOM中element元素被移除，element也不会被垃圾回收器回收。<br>为了避免类似这种循环引用的问题，最好在不使用它们的时候，手动断开连接<br>将变量值设为null,切断变量和它之前引用值的连接，当垃圾收集器下次运行时，就会删除这些值并回收它们的内存。<br>IE9中BOM/DOM对象都是原声的Javascript对象，避免了引用计数循环引用的问题，消除了常见内存泄漏的现象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">obj.element = null;</div><div class="line">element.someobj = null;</div></pre></td></tr></table></figure>
<ul>
<li><p>内存管理<br>解除引用(dereferencing)：将其中设置为null来释放其引用，解除一个值的引用的作用是让值脱离执行环境，以便垃圾收集器下次运行时将其回收<br>分配给web浏览器的内存通常比一般的桌面应用程序少，出于安全的考虑，防止浏览器耗尽系统内存而崩溃。确保占用较少的内存，能保证页面的性能。<br>优化内存占用的最佳方式，执行的代码中只保存必要的数据。一旦数据不再有用，可以解除引用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function createPerson()&#123;</div><div class="line">    return &#123;</div><div class="line">        name:&apos;person&apos;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">var globalPerson = createPerson;</div><div class="line">//dereferencing</div><div class="line">globalPerson = null;</div></pre></td></tr></table></figure>
</li>
<li><p>内存溢出<br>程序申请内存时，没有足够的内存空间供其使用。</p>
</li>
<li>内存泄漏<br>是指程序申请内存后，又不能回收,无法释放已申请的内存空间,内存泄漏会降低页面性能，还可能会导致程序出错或浏览器崩溃。内存泄漏可能会导致内存溢出。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/11/closure/" data-id="cj4hy1pec000ddwx9kdok5qqq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-setTimeout" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/24/setTimeout/" class="article-date">
  <time datetime="2017-03-24T11:55:59.000Z" itemprop="datePublished">2017-03-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/24/setTimeout/">定时器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h2><p>由于JavaScript是单线程的特性，Javascript是同一时间只能执行一段代码，异步事件的处理程序，需要在线程中没有代码执行的时候才能执行,定时器的延迟时间并不按照指定的时间间隔触发。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> count = <span class="number">0</span>;</div><div class="line"><span class="keyword">var</span> start = +<span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> n = <span class="number">0</span>; n &lt; <span class="number">1000</span>; n++)&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'n'</span>);</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'n is over time '</span>, +<span class="keyword">new</span> <span class="built_in">Date</span> - start);</div><div class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'setTimeout1'</span>, <span class="string">'time '</span>, (+<span class="keyword">new</span> <span class="built_in">Date</span> - start));</div><div class="line">&#125;,<span class="number">10</span>);</div><div class="line"><span class="keyword">var</span> interval = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    count++</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'setInterval '</span>,count, <span class="string">' time '</span>, (+<span class="keyword">new</span> <span class="built_in">Date</span> - start));</div><div class="line">    <span class="keyword">if</span>(count == <span class="number">100</span>)&#123;</div><div class="line">        clearInterval(interval);</div><div class="line">    &#125;</div><div class="line">&#125;, <span class="number">10</span>);</div><div class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'setTimeout2'</span>, <span class="string">'time '</span>, (+<span class="keyword">new</span> <span class="built_in">Date</span> - start));</div><div class="line">&#125;,<span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'start'</span>);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> m = <span class="number">0</span>; m&lt; <span class="number">1000</span>; m++)&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'m'</span>);</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'m is over time'</span>, +<span class="keyword">new</span> <span class="built_in">Date</span> - start);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'end'</span>);</div><div class="line"><span class="comment">//执行结果</span></div><div class="line">n</div><div class="line"> n is over time  <span class="number">28</span></div><div class="line">start</div><div class="line">m</div><div class="line">m is over time <span class="number">50</span></div><div class="line">end</div><div class="line">setTimeout1 time  <span class="number">51</span></div><div class="line">setInterval  <span class="number">1</span>  time  <span class="number">52</span></div><div class="line">setTimeout2 time  <span class="number">52</span></div><div class="line">setInterval  <span class="number">2</span>  time  <span class="number">60</span></div><div class="line">setInterval  <span class="number">3</span>  time  <span class="number">70</span></div><div class="line">setInterval  <span class="number">4</span>  time  <span class="number">80</span></div><div class="line">setInterval  <span class="number">5</span>  time  <span class="number">90</span></div><div class="line">setInterval  <span class="number">6</span>  time  <span class="number">100</span></div><div class="line">setInterval  <span class="number">7</span>  time  <span class="number">110</span></div><div class="line">setInterval  <span class="number">8</span>  time  <span class="number">120</span></div><div class="line">setInterval  <span class="number">9</span>  time  <span class="number">130</span></div><div class="line">setInterval  <span class="number">10</span>  time  <span class="number">140</span></div><div class="line">setInterval  <span class="number">11</span>  time  <span class="number">150</span></div></pre></td></tr></table></figure></p>
<p><img src="/css/images/timer.png" alt="线程代码执行"><br>由此可以看出,异步事件发生时，就会排队，只在线程空闲的时候才执行。<br>开始启动一个10毫秒的延迟的定时器，一个10毫秒的间隔定时器<br>主线代码执行了50毫秒,在10毫秒的时候，setTimeout1,setInterval, setTimeout2应该立即执行，但是线程里还在执行主线代码，setTimeout1，setInterval, setTimeout2排队等待线程空闲。50毫秒后，主线代码执行结束，开始执行setTimeout1,setInterval,setTimeout2。<br>浏览器只对一个setInterval的实例进行排队， 没有对多个实例进行排队，后续线程中没有排队的处理程序，setInterval每隔10毫秒执行。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/24/setTimeout/" data-id="cj4hy1peq000xdwx939o19rw5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-webpack" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/24/webpack/" class="article-date">
  <time datetime="2017-03-24T11:55:59.000Z" itemprop="datePublished">2017-03-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/24/webpack/">wepback学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="webpack学习笔记"><a href="#webpack学习笔记" class="headerlink" title="webpack学习笔记"></a>webpack学习笔记</h3><p>1.css-loader是用来处理.css文件，style-loader是通过在页面中插入style标签处理样式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//js文件中加载css文件</div><div class="line">require(&apos;style-loader!css-loader!./hello.css&apos;)</div><div class="line">//在命令行中通过module-bind处理css文件的加载</div><div class="line">webpack hello.js hello.bundle.js --module-bind &apos;css=style-loader!css-loader&apos;</div></pre></td></tr></table></figure></p>
<p>2.命令行中参数<br>–module-bind 打包文件需要用到的loader<br>–watch 监听文件的变化并重新打包<br>–progress 显示打包进度<br>–display-modules 打包的所有的模块<br>–display-reason 模块打包原因</p>
<h3 id="webpack-config"><a href="#webpack-config" class="headerlink" title="webpack config"></a>webpack config</h3><p>*在项目中创建webpack.congfig.js文件，在命令行中运行webpack，会默认执行webpack.config.js中的配置，如果webpack的配置文件不是webpack.config.js,在命令行中则需要配置文件的名字<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//命令行</div><div class="line">webpack --config webpack.dev.config.js</div><div class="line">//可以用npm来给wepback执行的时候添加参数，在package.json</div><div class="line">&#123;</div><div class="line">	&apos;scripts&apos;:&#123;</div><div class="line">		&apos;webpack&apos;:&apos;webpack --config webpack.dev.config.js --progress --display-module --display-reasons --color&apos;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="webpack配置参数entry"><a href="#webpack配置参数entry" class="headerlink" title="webpack配置参数entry"></a>webpack配置参数entry</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//一个入口文件,entry的值为字符串</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	<span class="attr">entry</span>:<span class="string">'./src/script/main.js'</span>,</div><div class="line">	<span class="attr">output</span>:&#123;</div><div class="line">    	<span class="attr">path</span>:<span class="string">'./dist/js'</span>,</div><div class="line">	 	<span class="attr">filename</span>:<span class="string">'bundle.js'</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//多个入口文件,entry的值为数组，将main.js和a.js打包在一起，生成bundle.js</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	<span class="attr">entry</span>:[<span class="string">'./src/script/main.js'</span>,<span class="string">'./src/script/a.js'</span>],</div><div class="line">		  <span class="attr">output</span>:&#123;</div><div class="line">		  <span class="attr">path</span>:<span class="string">'./dist/js'</span>,</div><div class="line">		  <span class="attr">filename</span>:<span class="string">'bundle.js'</span></div><div class="line">		  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//多页面文件,entry的值为对象,name为entry中的key,hash为此次打包的hash值，chunkhash为文件的md5值，可以认为是文件的版本号</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	<span class="attr">entry</span>:&#123;</div><div class="line">		<span class="string">"main"</span>:<span class="string">"./src/script/main.js"</span>,</div><div class="line">		<span class="string">"a"</span>:<span class="string">"./src/script/a.js"</span></div><div class="line">	&#125;,</div><div class="line">	<span class="attr">output</span>:&#123;</div><div class="line">		<span class="attr">path</span>:<span class="string">'./dist/js'</span>,</div><div class="line">		<span class="comment">//filename:'[name]-[hash].js'</span></div><div class="line">		filename:<span class="string">'[name]-[chunkhash].js'</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="自动化打包生成页面中的html，动态打包的文件名是不确定的"><a href="#自动化打包生成页面中的html，动态打包的文件名是不确定的" class="headerlink" title="自动化打包生成页面中的html，动态打包的文件名是不确定的"></a>自动化打包生成页面中的html，动态打包的文件名是不确定的</h3><p>利用webpack的html插件来解决<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div></pre></td><td class="code"><pre><div class="line">//安装html-webpack-plugin插件</div><div class="line">npm install html-webpack-plugin --save-dev</div><div class="line"></div><div class="line">//使用html-webpack-plugin插件,webpack.dev.config.js</div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">entry:&#123;</div><div class="line">main:&apos;./src/script/main.js&apos;,</div><div class="line">a:&apos;./src/script/a.js&apos;</div><div class="line">	  &#125;,</div><div class="line">output:&#123;</div><div class="line">path:&apos;./dist/js&apos;,</div><div class="line">filename:&apos;[name]-[chunkhash].js&apos;</div><div class="line">	   &#125;,</div><div class="line">plugins:[</div><div class="line">new htmlWebpackPlugin()</div><div class="line">]</div><div class="line">&#125;</div><div class="line">//此时执行npm run webpack 会在dist/js目录里生成一个引用a.js main.js的index.html文件，这个index.html并没有与项目根目录下创建的index.html有关联</div><div class="line"></div><div class="line">//关联根目录下的index.html</div><div class="line">module.exports = &#123;</div><div class="line">entry:&#123;</div><div class="line">main:&apos;./src/script/main.js&apos;,</div><div class="line">a:&apos;./src/script/a.js&apos;</div><div class="line">	  &#125;,</div><div class="line">output:&#123;</div><div class="line">path:&apos;./dist/js&apos;,</div><div class="line">filename:&apos;[name]-[chunkhash].js&apos;</div><div class="line">	   &#125;,</div><div class="line">plugins:[</div><div class="line">			new htmlWebpackPlugin(&#123;</div><div class="line">			template:&apos;index.html&apos;</div><div class="line">					&#125;)</div><div class="line">]</div><div class="line">&#125;</div><div class="line">// 打包后生成的index.html,a.js main.js都在dist/js/目录下，需要的目录结构应为</div><div class="line">dist---index.html js/a.js js/main.js,此时需要修改output的path，filenam配置</div><div class="line"></div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&#123;</div><div class="line">		&apos;main&apos;:&apos;./src/script/main.js&apos;,</div><div class="line">		&apos;a&apos;:&apos;./src/script/a.js&apos;</div><div class="line">	&#125;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name]-[chunkhash].js&apos;</div><div class="line">	&#125;,</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			filename:&apos;index-[hash].html&apos;,//指定文件的名字</div><div class="line">			template:&apos;index.html&apos;, //模板的名称</div><div class="line">			inject:&apos;head&apos;, //js插入的位置</div><div class="line">			title:&apos;webpack is good&apos;, //给模板index.html模板传递变量</div><div class="line">			date:new Date() //给模板传递date参数</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div><div class="line">//index.html引用htmlWebpackPlugin里的title</div><div class="line">&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</div><div class="line">&lt;body&gt;&lt;%= htmlWebpackPlugin.options.date %&gt;&lt;/body&gt;</div><div class="line"></div><div class="line">//在html中遍历出htmlWebpackPlugins的能获取的参数</div><div class="line"></div><div class="line">		&lt;div&gt;&lt;%= htmlWebpackPlugin.options.date %&gt;&lt;/div&gt;</div><div class="line">		&lt;% for(var key in htmlWebpackPlugin) &#123; %&gt;</div><div class="line">		&lt;%= key %&gt;</div><div class="line">		&lt;% &#125; %&gt;</div><div class="line"></div><div class="line">		&lt;% for (var key in htmlWebpackPlugin.files)&#123; %&gt;</div><div class="line">		&lt;%= key%&gt;: &lt;%= JSON.stringify(htmlWebpackPlugin.files[key]) %&gt;</div><div class="line">		&lt;% &#125; %&gt;</div><div class="line">		</div><div class="line">		&lt;% for (var key in htmlWebpackPlugin.options)&#123; %&gt;</div><div class="line">		&lt;%= key%&gt;: &lt;%= JSON.stringify(htmlWebpackPlugin.options[key]) %&gt;</div><div class="line">		&lt;% &#125; %&gt;</div><div class="line">		</div><div class="line">//htmlWebpackPlugin的key</div><div class="line">		files</div><div class="line">		</div><div class="line">		options</div><div class="line">	//htmlWebpackPlugin.files的key/value	</div><div class="line">		publicPath: &quot;&quot;</div><div class="line">		</div><div class="line">		chunks: &#123;&quot;main&quot;:&#123;&quot;size&quot;:26,&quot;entry&quot;:&quot;js/main-41d4982751088424227f.js&quot;,&quot;hash&quot;:&quot;41d4982751088424227f&quot;,&quot;css&quot;:[]&#125;,&quot;a&quot;:&#123;&quot;size&quot;:18,&quot;entry&quot;:&quot;js/a-4f55e4d7524c54cdeb7a.js&quot;,&quot;hash&quot;:&quot;4f55e4d7524c54cdeb7a&quot;,&quot;css&quot;:[]&#125;&#125;</div><div class="line">		</div><div class="line">		js: [&quot;js/main-41d4982751088424227f.js&quot;,&quot;js/a-4f55e4d7524c54cdeb7a.js&quot;]</div><div class="line">		</div><div class="line">		css: []</div><div class="line">		</div><div class="line">		manifest: </div><div class="line">		</div><div class="line">	//htmlWebpackPlugin.options的key/value	</div><div class="line">		</div><div class="line">		template: &quot;/home/marong/webpack-demo/node_modules/html-webpack-plugin/lib/loader.js!/home/marong/webpack-demo/index.html&quot;</div><div class="line">		</div><div class="line">		filename: &quot;index.html&quot;</div><div class="line">		</div><div class="line">		hash: false</div><div class="line">		</div><div class="line">		inject: &quot;head&quot;</div><div class="line">		</div><div class="line">		compile: true</div><div class="line">		</div><div class="line">		favicon: false</div><div class="line">		</div><div class="line">		minify: false</div><div class="line">		</div><div class="line">		cache: true</div><div class="line">		</div><div class="line">		showErrors: true</div><div class="line">		</div><div class="line">		chunks: &quot;all&quot;</div><div class="line">		</div><div class="line">		excludeChunks: []</div><div class="line">		</div><div class="line">		title: &quot;webpack is good&quot;</div><div class="line">		</div><div class="line">		xhtml: false</div><div class="line">		</div><div class="line">		date: &quot;2017-03-25T12:12:45.828Z&quot;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&#123;</div><div class="line">		&apos;main&apos;:&apos;./src/script/main.js&apos;,</div><div class="line">		&apos;a&apos;:&apos;./src/script/a.js&apos;</div><div class="line">	&#125;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name]-[chunkhash].js&apos;,</div><div class="line">		publicPath:&apos;http://cdn.com/js&apos; //上线打包地址占位,打包后生成的js文件地址是以此开头</div><div class="line">	&#125;,</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;index.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:fasle, //关闭自动注入js文件,手动在index.html中插入js</div><div class="line">			minify:&#123; //对html文件进行压缩</div><div class="line">			removeComments:true,//删除html中注释</div><div class="line">			collapseWhitespace:true //删除html中空格</div><div class="line">			&#125;,</div><div class="line">			title:&apos;webpack is good&apos;,</div><div class="line">			date:new Date()</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div><div class="line">//index.html</div><div class="line">&lt;head&gt;</div><div class="line">&lt;script src=&apos;&lt;%= htmlWebpackPlugin.chunks.main.entry&apos;&gt;&lt;/script&gt;</div><div class="line">&lt;script src=&apos;&lt;%= htmlWebpackPlugin.chunks.a.entry&apos;&gt;&lt;/script&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">//配置publicPath,生成的html</div><div class="line">&lt;script src=&quot;http://cdn.com/js/main-19a6af676da9ed429fb5.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script src=&quot;http://cdn.com/js/a-9b44f8a7189f4606479f.js&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="处理多页面应用的情况"><a href="#处理多页面应用的情况" class="headerlink" title="处理多页面应用的情况"></a>处理多页面应用的情况</h3><p>假设有a.html b.html c.html三个页面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">//webpack.dev.config.js配置</div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&#123;</div><div class="line">		&apos;main&apos;:&apos;./src/script/main.js&apos;,</div><div class="line">		&apos;a&apos;:&apos;./src/script/a.js&apos;,</div><div class="line">		&apos;b&apos;:&apos;./src/script/b.js&apos;,</div><div class="line">		&apos;c&apos;:&apos;./src/script/c.js&apos;</div><div class="line">	&#125;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name]-[chunkhash].js&apos;,</div><div class="line">		publicPath:&apos;http://cdn.com/&apos;</div><div class="line">	&#125;,</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;a.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:false, </div><div class="line">			title:&apos;This a.html&apos;,</div><div class="line">			date:new Date()</div><div class="line">		&#125;),</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;b.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:false, </div><div class="line">			title:&apos;This is b.html&apos;,</div><div class="line">			date:new Date()</div><div class="line">		&#125;),</div><div class="line"></div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;c.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:false, </div><div class="line">			title:&apos;This is c.html&apos;,</div><div class="line">			date:new Date()</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div><div class="line"></div><div class="line">//index.html模板中js都固定引入chunks.a.entry,所以生成的三个页面都会有a.js</div><div class="line">//解决方案，可以在webpack配置文件中传递变量给模板，模板来判断引入哪个js,</div><div class="line">//这种方式比较麻烦.html-webpack-plugin中能设置chunks的传递值(默认传递所有的chunks),只传递对当前页面有用的chunks</div><div class="line"></div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;</div><div class="line">		&lt;meta charset=&apos;utf-8&apos;&gt;</div><div class="line">		&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</div><div class="line">		&lt;script src=&quot;&lt;%= htmlWebpackPlugin.files.chunks.main.entry %&gt;&quot;&gt;&lt;/script&gt;</div><div class="line">		&lt;script src=&quot;&lt;%= htmlWebpackPlugin.files.chunks.a.entry %&gt;&quot;&gt;&lt;/script&gt;</div><div class="line">	&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;!-- 文章主体start --&gt;</div><div class="line">		&lt;h1&gt;webpack title&lt;/h1&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<h3 id="多页面应用通过设置chunks参数，不同页面通过同一个模板加载相应的js文件"><a href="#多页面应用通过设置chunks参数，不同页面通过同一个模板加载相应的js文件" class="headerlink" title="多页面应用通过设置chunks参数，不同页面通过同一个模板加载相应的js文件"></a>多页面应用通过设置chunks参数，不同页面通过同一个模板加载相应的js文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">//webpack.dev.config.js</div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&#123;</div><div class="line">		&apos;main&apos;:&apos;./src/script/main.js&apos;,</div><div class="line">		&apos;a&apos;:&apos;./src/script/a.js&apos;,</div><div class="line">		&apos;b&apos;:&apos;./src/script/b.js&apos;,</div><div class="line">		&apos;c&apos;:&apos;./src/script/c.js&apos;</div><div class="line">	&#125;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name]-[chunkhash].js&apos;,</div><div class="line">		publicPath:&apos;http://cdn.com/&apos;</div><div class="line">	&#125;,</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;a.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:true,//打开自动注入js</div><div class="line">			title:&apos;This a.html&apos;,</div><div class="line">			chunks:[&apos;main&apos;,&apos;a&apos;] //对a.html有用的chunks</div><div class="line">			//excludeChunks:[&apos;b&apos;,&apos;c&apos;]//如果页面中需要加载大多数chunks,可以采用排除的方式,排除当前页面不需要的chunks</div><div class="line">		&#125;),</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;b.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:true, </div><div class="line">			title:&apos;This is b.html&apos;,</div><div class="line">			chunks:[&apos;b&apos;]</div><div class="line">		&#125;),</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;c.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:true, </div><div class="line">			title:&apos;This is c.html&apos;,</div><div class="line">			chunks:[&apos;c&apos;]</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div><div class="line">//index.html</div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;</div><div class="line">		&lt;meta charset=&apos;utf-8&apos;&gt;</div><div class="line">		&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</div><div class="line">	&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;!-- 文章主体start --&gt;</div><div class="line">		&lt;h1&gt;webpack title&lt;/h1&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h3 id="如果追求页面的性能，减少http的请求数，想在页面中以inline的形式插入js"><a href="#如果追求页面的性能，减少http的请求数，想在页面中以inline的形式插入js" class="headerlink" title="如果追求页面的性能，减少http的请求数，想在页面中以inline的形式插入js"></a>如果追求页面的性能，减少http的请求数，想在页面中以inline的形式插入js</h3><p>html-webpack-plugin的作者给出了解决方法，在<a href="https://github.com/jantimon/html-webpack-plugin/blob/master/examples/inline/template.jade" target="_blank" rel="external">https://github.com/jantimon/html-webpack-plugin/blob/master/examples/inline/template.jade</a><br>中，利用webpack暴露出的变量compilation.assets在页面中插入chunks中的entry,由于webpack配置了publicPath，chunk的ernty都带着publicPath,<br>compilation.assert中存储的是不带publicPath的entry<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;</div><div class="line">		&lt;meta charset=&apos;utf-8&apos;&gt;</div><div class="line">		&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</div><div class="line">		&lt;script&gt;</div><div class="line">&lt;%= compilation.assets[htmlWebpackPlugin.files.main.entry.substr(htmlWebpackPlugin.files.publicPath.length)].source() %&gt;</div><div class="line">		&lt;/script&gt;</div><div class="line">	&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;!-- 文章主体start --&gt;</div><div class="line">		&lt;h1&gt;webpack title&lt;/h1&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<h3 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h3><p>处理资源文件，返回新的资源。<br>loader的处理方式有三种，require加载文件相应文件的时，在webpack配置文件里，在命令行里。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">//require的时候</div><div class="line">require(&apos;style-loader!css-loader!./src/style/common.css&apos;)</div><div class="line">//webpack的配置文件</div><div class="line">&#123;</div><div class="line">module:&#123;</div><div class="line">loaders:[</div><div class="line">		&#123;</div><div class="line">		test:/\.jade$/,loader:&quot;jade&quot;</div><div class="line">		&#125;,</div><div class="line">		&#123;</div><div class="line">		test:/\.css$/,loader:&apos;style!css&apos;</div><div class="line">		&#125;,</div><div class="line">		&#123;</div><div class="line">		test:/\.css$/, loaders:[&quot;style&quot;,&quot;css&quot;]</div><div class="line">		&#125;</div><div class="line">]</div><div class="line">	   &#125;</div><div class="line">&#125;</div><div class="line">//命令行列</div><div class="line">webpack --module-bind jade --module-bind &apos;css=style!css&apos;</div></pre></td></tr></table></figure></p>
<h3 id="webpack-babel"><a href="#webpack-babel" class="headerlink" title="webpack babel"></a>webpack babel</h3><p>处理es6语法，es6每年都会修订，es2015/es2016/es2017,latest插件包含所有特性(es2015/es2016/es2017)<br>通过preset设置babel-loader转换特性,插件需要通过npm来安装<br>给babel指定参数有四种方式，一种是在babel-loader后直接跟参数，一种是在webpack配置文件中通过query设置,<br>还可以通过创建.babelrc配置文件,在package.json中配置babel</p>
<p>设置babel-loader， exclude,include时候，需要绝对路径，并且同时设置，不然会报错<br>couldn’t find preset latest<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">//安装babel</div><div class="line">npm install --save-dev babel-loader bable-core</div><div class="line">//安装latest插件</div><div class="line">inpm install --save-dev  bable-preset-latest</div><div class="line">//babel-loader直接跟参数</div><div class="line">//配置文件中设置参数</div><div class="line"></div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">var path  = require(&apos;path&apos;);</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&apos;./src/app.js&apos;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name].bundle.js&apos;</div><div class="line">	&#125;,</div><div class="line">	module:&#123;</div><div class="line">		loaders:[</div><div class="line">			&#123;</div><div class="line">				test:/\.js$/,</div><div class="line">				loader:&apos;babel&apos;,</div><div class="line">				exclude:path.resolve(__dirname, &apos;node_modules&apos;),//排除babel-loader编译文件夹</div><div class="line">				include:path.resolve(__dirname, &apos;src&apos;),//babel-loader很耗时，指定编译的文件夹</div><div class="line">				query:&#123;</div><div class="line">					presets:[&quot;latest&quot;]</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		]</div><div class="line">	&#125;,</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			filename:&apos;index.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:&apos;body&apos;</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div><div class="line"></div><div class="line">//.babelrc配置文件</div><div class="line">&#123;</div><div class="line">&quot;presets&quot;:[&quot;latest&quot;]</div><div class="line">&#125;</div><div class="line">//package.json配置babel</div><div class="line"></div><div class="line">  &quot;babel&quot;:&#123;</div><div class="line">	  &quot;presets&quot;:[&quot;latest&quot;]</div><div class="line">  &#125;,</div></pre></td></tr></table></figure></p>
<h3 id="webpack处理css"><a href="#webpack处理css" class="headerlink" title="webpack处理css"></a>webpack处理css</h3><ul>
<li>postcss-loader css后处理loader，postcss常用插件autoprefixer<br><em>style-loader css-loader  post-css
</em>如果在css文件中@import ‘common.css’, webpack会用style-loader,css-loader处理，但不会用postcss-loader来处理，<br>并把通过import引入的css新建一个style标签来插入到页面中<br>需要css-loader配置参数,importLoaders=num,设置在css-loader之后，指定几个数量的loader来处理import的css<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev style-loader css-loader postcss-loader autoprefixer</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">//webpack.dev.config.js</div><div class="line"></div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">var path  = require(&apos;path&apos;);</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&apos;./src/app.js&apos;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name].bundle.js&apos;</div><div class="line">	&#125;,</div><div class="line">	module:&#123;</div><div class="line">		loaders:[</div><div class="line">			&#123;</div><div class="line">				test:/\.js$/,</div><div class="line">				loader:&apos;babel&apos;,</div><div class="line">				exclude:path.resolve(__dirname, &apos;node_modules&apos;),</div><div class="line">				include:path.resolve(__dirname, &apos;src&apos;),</div><div class="line">				query:&#123;</div><div class="line">					presets:[&quot;latest&quot;]</div><div class="line">				&#125;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.css$/,</div><div class="line">				loader:&apos;style-loader!css-loader?importLoaders=1!postcss-loader&apos;</div><div class="line">			&#125;</div><div class="line">		]</div><div class="line">	&#125;,</div><div class="line">	//postcss:function()&#123;//postcss是数组，填写postcss-loader需要的插件，必填也可直接写成一个数组的格式</div><div class="line">		//return [</div><div class="line">			//require(&apos;autoprefixer&apos;)(&#123;</div><div class="line">				//broswers:[&apos;last 5 versions&apos;]</div><div class="line">			//&#125;)</div><div class="line">		//]</div><div class="line">	//&#125;,</div><div class="line">	postcss:[</div><div class="line">		require(&apos;autoprefixer&apos;)(&#123;</div><div class="line">			broswers:[&apos;last 5 versions&apos;]</div><div class="line">		&#125;)</div><div class="line">	],</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			filename:&apos;index.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:&apos;body&apos;</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="webpack-处理less-sass文件"><a href="#webpack-处理less-sass文件" class="headerlink" title="webpack 处理less sass文件"></a>webpack 处理less sass文件</h3><p>如果是less文件中import less文件，能正常编译，不需要给css-loader配置importLoaders参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install less less-loader sass-loader --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//webpack 配置</div><div class="line">	module:&#123;</div><div class="line">		loaders:[</div><div class="line">			&#123;</div><div class="line">				test:/\.js$/,</div><div class="line">				loader:&apos;babel&apos;,</div><div class="line">				exclude:path.resolve(__dirname, &apos;node_modules&apos;),</div><div class="line">				include:path.resolve(__dirname, &apos;src&apos;),</div><div class="line">				query:&#123;</div><div class="line">					presets:[&quot;latest&quot;]</div><div class="line">				&#125;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.css$/,</div><div class="line">				loader:&apos;style-loader!css-loader?importLoaders=1!postcss-loader&apos;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.less/,</div><div class="line">				//loader:&apos;style-loader!css-loader!postcss-loader!less-loader&apos;</div><div class="line">				loader:&apos;style!css!postcss!less&apos;//可以省略-loader</div><div class="line">			&#125;</div><div class="line">		]</div><div class="line">	&#125;,</div></pre></td></tr></table></figure>
<h3 id="webpack-处理项目中的模板文件"><a href="#webpack-处理项目中的模板文件" class="headerlink" title="webpack 处理项目中的模板文件"></a>webpack 处理项目中的模板文件</h3><p>*有多种模板文件loader, html-loader, ejs-loader<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//html-loader把模板处理为字符串</div><div class="line">npm install --save-dev html-loader ejs-loader</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line">//html</div><div class="line"></div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;</div><div class="line">		&lt;meta charset=&apos;utf-8&apos;&gt;</div><div class="line">		&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</div><div class="line">	&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;!-- 文章主体start --&gt;</div><div class="line">		&lt;h1&gt;webpack title&lt;/h1&gt;</div><div class="line">		&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line">//lader.html</div><div class="line"></div><div class="line">&lt;div class=&quot;layer&quot;&gt;</div><div class="line">	&lt;div&gt;This is a layer&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">//layer.tpl</div><div class="line"></div><div class="line">&lt;div class=&quot;layer&quot;&gt;</div><div class="line">	&lt;div&gt;&lt;%= name %&gt;&lt;/div&gt;</div><div class="line">	&lt;% for (var i = 0; i &lt; arr.length;i++) &#123;%&gt;</div><div class="line">&lt;%= arr[i] %&gt;</div><div class="line">	&lt;% &#125; %&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">//layer.js</div><div class="line"></div><div class="line">//import tpl from &apos;./layer.html&apos;;</div><div class="line">import tpl from &apos;./layer.tpl&apos;;</div><div class="line">import &apos;./layer.less&apos;;</div><div class="line">function layer()&#123;</div><div class="line">	return &#123;</div><div class="line">		name:&apos;layer&apos;,</div><div class="line">		tpl:tpl</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">export default layer;</div><div class="line">//app.js</div><div class="line"></div><div class="line">import &apos;./css/common.css&apos;;</div><div class="line">import Layer from &apos;./components/layer/layer.js&apos;;</div><div class="line">const App = function()&#123;</div><div class="line">	var layer = new Layer();</div><div class="line">	var app = document.getElementById(&apos;app&apos;);</div><div class="line">	//html string</div><div class="line">	app.innerHTML = layer.tpl;</div><div class="line">	//ejs function </div><div class="line">	app.innerHTML = layer.tpl(&#123;</div><div class="line">		name:&apos;ejs&apos;,</div><div class="line">		arr:[&apos;tpl&apos;,&apos;html&apos;, &apos;loader&apos;]</div><div class="line">	&#125;)</div><div class="line"></div><div class="line">&#125;</div><div class="line">new App();</div><div class="line">//wepback配置文件</div><div class="line"></div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">var path  = require(&apos;path&apos;);</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&apos;./src/app.js&apos;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name].bundle.js&apos;</div><div class="line">	&#125;,</div><div class="line">	module:&#123;</div><div class="line">		loaders:[</div><div class="line">			&#123;</div><div class="line">				test:/\.js$/,</div><div class="line">				loader:&apos;babel&apos;,</div><div class="line">				exclude:path.resolve(__dirname, &apos;node_modules&apos;),</div><div class="line">				include:path.resolve(__dirname, &apos;src&apos;),</div><div class="line">				query:&#123;</div><div class="line">					presets:[&quot;latest&quot;]</div><div class="line">				&#125;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.css$/,</div><div class="line">				loader:&apos;style-loader!css-loader?importLoaders=1!postcss-loader&apos;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.less$/,</div><div class="line">				//loader:&apos;style-loader!css-loader!postcss-loader!less-loader&apos;</div><div class="line">				loader:&apos;style!css!postcss!less&apos;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.tpl/,</div><div class="line">				loader:&apos;ejs-loader&apos;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.html$/,</div><div class="line">				loader:&apos;html-loader&apos;</div><div class="line">			&#125;</div><div class="line">		]</div><div class="line">	&#125;,</div><div class="line">	//postcss:function()&#123;</div><div class="line">		//return [</div><div class="line">			//require(&apos;autoprefixer&apos;)(&#123;</div><div class="line">				//broswers:[&apos;last 5 versions&apos;]</div><div class="line">			//&#125;)</div><div class="line">		//]</div><div class="line">	//&#125;,</div><div class="line">	postcss:[</div><div class="line">		require(&apos;autoprefixer&apos;)(&#123;</div><div class="line">			broswers:[&apos;last 5 versions&apos;]</div><div class="line">		&#125;)</div><div class="line">	],</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			filename:&apos;index.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:&apos;body&apos;</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="webpack-处理图片及其他文件"><a href="#webpack-处理图片及其他文件" class="headerlink" title="webpack 处理图片及其他文件"></a>webpack 处理图片及其他文件</h3><p>file-loader 处理图片<br>url-loader 当图片大小小于limit的时候，转为base64,大于limit的时候，交由file-loader处理<br>image-webpack-loader 压缩图片大小，与file-loader,url-loader配合使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev file-loader url-loader image-webpack-loader</div><div class="line"></div><div class="line">			&#123;</div><div class="line">				test:/\.(jpg|png|svg|gif)/i,</div><div class="line">				//loader:&apos;file-loader&apos;,</div><div class="line">				//query:&#123;</div><div class="line">				//	name:&apos;assets/[name]-[hash:5].[ext]&apos;</div><div class="line">				//&#125;</div><div class="line">				//loader:&apos;url-loader&apos;,</div><div class="line">				//query:&#123;</div><div class="line">				//	limit:100000,</div><div class="line">				//	name:&apos;assets/[name]-[hash:5].[ext]&apos;</div><div class="line">				//&#125;</div><div class="line">				loaders:[</div><div class="line">					&apos;url-loader?limit=100000&amp;name=assets/[name]-[hash-5].[ext]&apos;,</div><div class="line">					&apos;image-webpack&apos;</div><div class="line">				]</div><div class="line">			&#125;</div></pre></td></tr></table></figure></p>
<h3 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h3><ul>
<li>webpack-dev-server是一个小型Node.js Express服务器，它使用webpack-dev-middleware中间件来为通过wepback打包生成的资源文件提供web服务。它还有一个通过Socket.IO连接着webpack-dev-server服务器的小型运行时程序。</li>
<li>publicPath</li>
<li>启动webpack-dev-server后，目标文件中看不到编译后的文件，实时编译后的文件都保存到了内存中。</li>
</ul>
<h3 id="postcss-sprites-自动拼合图片"><a href="#postcss-sprites-自动拼合图片" class="headerlink" title="postcss-sprites 自动拼合图片"></a>postcss-sprites 自动拼合图片</h3><p>能自动拼合图片，能生成单个或多个sprites图片，并能自动输出图片的大小<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev postcss-sprites</div></pre></td></tr></table></figure></p>
<p>配置如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line">var postcss = require(&apos;postcss&apos;)</div><div class="line">var postcssSprites = require(&apos;postcss-sprites&apos;)</div><div class="line">var postcssAssets = require(&apos;postcss-assets&apos;)</div><div class="line">var postcssNext = require(&apos;postcss-cssnext&apos;)</div><div class="line">var updateRule = require(&apos;postcss-sprites/lib/core&apos;).updateRule;</div><div class="line"></div><div class="line">        new webpack.LoaderOptionsPlugin(&#123;</div><div class="line">            options: &#123;</div><div class="line">                postcss:function()&#123;</div><div class="line">                    return [</div><div class="line">                        postcssAssets(&#123;</div><div class="line">                            loadPaths: [&apos;./src/images/&apos;],</div><div class="line">                            relative: true</div><div class="line">                        &#125;),</div><div class="line">                        postcssNext(&#123;//代替autoprefixer</div><div class="line">                            browsers: [&quot;&gt; 1%&quot;, &quot;last 2 version&quot;, &quot;Android &gt;= 4.0&quot;]</div><div class="line">                        &#125;),</div><div class="line">                        postcssSprites(&#123;</div><div class="line">                        //需要处理样式表的文件夹</div><div class="line">                            stylesheetPath: &apos;./src/css&apos;,</div><div class="line">                            //生成sprites图片的文件夹</div><div class="line">                            spritePath: &apos;./src/images/outputsprite&apos;,</div><div class="line">                            outputDimensions: true,</div><div class="line">                            skipPrefix: true,</div><div class="line">                            //过滤需要合并的图片</div><div class="line">                            filterBy: function(image) &#123;</div><div class="line">		                            if (!/sprite/.test(image.url)) &#123;</div><div class="line">			                              return Promise.reject();</div><div class="line">		                            &#125;</div><div class="line"></div><div class="line">		                            return Promise.resolve();</div><div class="line">	                          &#125;,</div><div class="line">                              //可以根据匹配规则，合并某组文件为一个sprites</div><div class="line">                            groupBy: function(image) &#123;</div><div class="line">                            //图片文件名中有shapes合并为一个sprite.shape.png</div><div class="line">		                            // if (image.url.indexOf(&apos;shapes&apos;) === -1) &#123;</div><div class="line">			                          //     return Promise.reject(new Error(&apos;Not a shape image.&apos;));</div><div class="line">		                            // &#125;</div><div class="line"></div><div class="line">		                            // return Promise.resolve(&apos;shapes&apos;);</div><div class="line">                                    //根据文件夹拼合一组图片，如果有/images/sprites/index   /images/sprites/login 这两个文件夹，会生成三张图片，sprites.index.png,sprites.login.png, sprites.other.png 三张图片</div><div class="line"></div><div class="line">                                let groups = /\/images\/sprites\/(.*?)\/.*/gi.exec(image.url);</div><div class="line">                                let groupName = groups ? groups[1] : &apos;other&apos;;</div><div class="line">                                image.retina = true;</div><div class="line">                                image.ratio = 1;</div><div class="line">                                if (groupName) &#123;</div><div class="line">                                    let ratio = /@(\d+)x$/gi.exec(groupName);</div><div class="line">                                    if (ratio) &#123;</div><div class="line">                                        ratio = ratio[1];</div><div class="line">                                        while (ratio &gt; 10) &#123;</div><div class="line">                                            ratio = ratio / 10;</div><div class="line">                                        &#125;</div><div class="line">                                        image.ratio = ratio;</div><div class="line">                                    &#125;</div><div class="line">                                &#125;</div><div class="line">                                return Promise.resolve(groupName);</div><div class="line">	                          &#125;,</div><div class="line">	                          hooks: &#123;</div><div class="line">                              //onUpdateRule控制输入到css的内容，下面的代码回在生成的css中带有图片的宽高</div><div class="line">		                            onUpdateRule: function(rule, token, image) &#123;</div><div class="line">			                              // Use built-in logic for background-image &amp; background-position</div><div class="line">			                              updateRule(rule, token, image);</div><div class="line"></div><div class="line">			                              [&apos;width&apos;, &apos;height&apos;].forEach(function(prop) &#123;</div><div class="line">				                                var value = image.coords[prop];</div><div class="line">				                                if (image.retina) &#123;</div><div class="line">					                                  value /= image.ratio;</div><div class="line">				                                &#125;</div><div class="line">				                                rule.insertAfter(rule.last, postcss.decl(&#123;</div><div class="line">					                                  prop: prop,</div><div class="line">					                                  value: value + &apos;px&apos;</div><div class="line">				                                &#125;));</div><div class="line">			                              &#125;);</div><div class="line">		                            &#125;</div><div class="line">	                          &#125;</div><div class="line">                        &#125;)</div><div class="line">                    ]</div><div class="line">                &#125;,</div></pre></td></tr></table></figure></p>
<h3 id="extract-text-webpack-plugin"><a href="#extract-text-webpack-plugin" class="headerlink" title="extract-text-webpack-plugin"></a>extract-text-webpack-plugin</h3><p>把样式单独打包成一个样式文件,并插入到页面中原来注入style标签的位置,对css、less、sass文件配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">var ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;)</div><div class="line">var ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;)</div><div class="line"></div><div class="line">var DeployFtpWebpackPlugin = require(&apos;./deploy.plugin&apos;);</div><div class="line">// process.traceDeprecation = true;</div><div class="line">module.exports = &#123;</div><div class="line">    entry:&apos;./src/main.js&apos;,</div><div class="line">    output:&#123;</div><div class="line">        path: path.resolve(__dirname, &apos;dist&apos;),</div><div class="line">        filename: &apos;bundle-[hash].js&apos;</div><div class="line">    &#125;,</div><div class="line">    module: &#123;</div><div class="line">        rules: [</div><div class="line">            &#123;</div><div class="line">                test:/\.js$/,</div><div class="line">                loader:&apos;babel-loader&apos;,</div><div class="line">                exclude: /node_modules/</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test:/\.css$/,</div><div class="line">                use: ExtractTextPlugin.extract(&#123;</div><div class="line">                    fallback: &apos;style-loader&apos;,</div><div class="line">                    use:&apos;css-loader?importLoaders=1!postcss-loader&apos;</div><div class="line">                &#125;)</div><div class="line">                // loader: &apos;style-loader!css-loader?importLoaders=1!postcss-loader&apos;</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test:/\.scss/,</div><div class="line">                use: ExtractTextPlugin.extract(&#123;</div><div class="line">                    fallback: &apos;style-loader&apos;,</div><div class="line">                    use: &apos;css-loader!postcss-loader!sass-loader&apos;</div><div class="line">                &#125;)</div><div class="line">                // loader:&apos;style-loader!css-loader!postcss-loader!sass-loader&apos;</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test:/\.(jpg|png|svg|gif)$/,</div><div class="line">                loader: &apos;url-loader&apos;,</div><div class="line">                query: &#123;</div><div class="line">                    limit:10,</div><div class="line">                    name: &apos;assets/[name]-[hash:5].[ext]&apos;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;,</div><div class="line">    plugins: [</div><div class="line">        new ExtractTextPlugin(&quot;style.css&quot;),</div><div class="line">        ...</div></pre></td></tr></table></figure></p>
<h3 id="第三方库不打包处理-webpack-IgnorePlugin"><a href="#第三方库不打包处理-webpack-IgnorePlugin" class="headerlink" title="第三方库不打包处理,webpack.IgnorePlugin"></a>第三方库不打包处理,webpack.IgnorePlugin</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var ignoreFiles = new Webpack,IgnorePlugin(/\/jquery.js$/);</div><div class="line">module.exports = &#123;</div><div class="line">plugins: [ignoreFiles]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="提取多入口文件中公共的代码，打包成一个独立的文件webpack-optimize-CommonsChunkPlugin"><a href="#提取多入口文件中公共的代码，打包成一个独立的文件webpack-optimize-CommonsChunkPlugin" class="headerlink" title="提取多入口文件中公共的代码，打包成一个独立的文件webpack.optimize.CommonsChunkPlugin"></a>提取多入口文件中公共的代码，打包成一个独立的文件webpack.optimize.CommonsChunkPlugin</h3><ol>
<li>可以提取多入口文件中公共的代码<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">entry:&#123;</div><div class="line">    main:&apos;./src/main.js&apos;,</div><div class="line">    main2:&apos;./src/main2.js&apos;,</div><div class="line">    vender:Object.keys(packageJson.dependencies)</div><div class="line">&#125;,</div><div class="line">...</div><div class="line">    new webpack.optimize.CommonsChunkPlugin(&#123;</div><div class="line">        name:&apos;common&apos;,</div><div class="line">        filename:&apos;common.js&apos;,</div><div class="line">        chunks: [&apos;main&apos;, &apos;main2&apos;]</div><div class="line">    &#125;),</div><div class="line">    //最后会生成三个文件common.js main.js main2.js vender.js</div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="webpack-optimize-OccurenceOrderPlugin"><a href="#webpack-optimize-OccurenceOrderPlugin" class="headerlink" title="webpack.optimize.OccurenceOrderPlugin"></a>webpack.optimize.OccurenceOrderPlugin</h4><ul>
<li>给组件分配ID，通过这个插件webpack可以分析考虑使用最多的模块，并未他们分配最小的ID<br>在webpack2中改为webpack.optimize.OcurrenceOrderPlugin,在webpack2中默认开启,不用在配置文件中写 </li>
</ul>
<p>plugins: [<br>    // webpack 1</p>
<ul>
<li>new webpack.optimize.OccurenceOrderPlugin()<br>// webpack 2</li>
<li>new webpack.optimize.OccurrenceOrderPlugin()<br>]</li>
</ul>
<h3 id="wepback-optimize-UglifyJsPlugin压缩JS代码"><a href="#wepback-optimize-UglifyJsPlugin压缩JS代码" class="headerlink" title="wepback.optimize.UglifyJsPlugin压缩JS代码"></a>wepback.optimize.UglifyJsPlugin压缩JS代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install uglifyjs-webpack-plugin --save-dev</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h3 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h3><ol>
<li>配置loader时不能省略-loader</li>
<li>postcss配置报错，在webpack2中不能包含自定义配置项来配置loader，postcss用LoaderOptionsPlugin来给loader配置<br>报错信息<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">Invalid configuration object. Webpack has been initialised using a configuration object that does not match the API schema.</div><div class="line"> - configuration has an unknown property <span class="string">'postcss'</span>. These properties are valid:</div><div class="line">   object &#123; amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry, externals?, loader?, module?, name?, node?, output?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? &#125;</div><div class="line">   For typos: please correct them.</div><div class="line">   For loader options: webpack 2 no longer allows custom properties <span class="keyword">in</span> configuration.</div><div class="line">     Loaders should be updated to allow passing options via loader options <span class="keyword">in</span> module.rules.</div><div class="line">     Until loaders are updated one can use the LoaderOptionsPlugin to pass these options to the loader:</div><div class="line">     plugins: [</div><div class="line">       new webpack.LoaderOptionsPlugin(&#123;</div><div class="line">         // <span class="built_in">test</span>: /\.xxx$/, // may apply this only <span class="keyword">for</span> some modules</div><div class="line">         options: &#123;</div><div class="line">           postcss: ...</div><div class="line">         &#125;</div><div class="line">       &#125;)</div><div class="line">     ]</div></pre></td></tr></table></figure>
</li>
</ol>
<p>webpack2中需替换为<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> webpack.LoaderOptionsPlugin(&#123;</div><div class="line">    <span class="attr">options</span>: &#123;</div><div class="line">        <span class="attr">postcss</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> [</div><div class="line">                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123;</div><div class="line">                    <span class="attr">broswers</span>:[<span class="string">'last 5 version'</span>]</div><div class="line">                &#125;),</div><div class="line">                <span class="built_in">require</span>(<span class="string">'postcss-assets'</span>)(&#123;</div><div class="line">                    <span class="attr">loadPaths</span>: [<span class="string">'./src/images/'</span>],</div><div class="line">                    <span class="attr">relative</span>: <span class="literal">true</span></div><div class="line">                &#125;),</div><div class="line">                <span class="built_in">require</span>(<span class="string">"postcss-cssnext"</span>)(&#123;</div><div class="line">                    <span class="attr">browsers</span>: [<span class="string">"&gt; 1%"</span>, <span class="string">"last 2 version"</span>, <span class="string">"Android &gt;= 4.0"</span>]</div><div class="line">                &#125;),</div><div class="line">                <span class="built_in">require</span>(<span class="string">'postcss-sprites'</span>)(&#123;</div><div class="line">                    <span class="attr">stylesheetPath</span>: <span class="string">'./src/css'</span>,</div><div class="line">                    <span class="attr">spritePath</span>: <span class="string">'./src/images/sprite.png'</span>,</div><div class="line">                    <span class="attr">outputDimensions</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">skipPrefix</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">filterBy</span>: <span class="function"><span class="keyword">function</span>(<span class="params">img</span>) </span>&#123;</div><div class="line">                        <span class="keyword">return</span> <span class="regexp">/\/sp\-/</span>.test(img.url);</div><div class="line">                    &#125;,</div><div class="line">                    <span class="attr">groupBy</span>: <span class="function"><span class="keyword">function</span>(<span class="params">img</span>) </span>&#123;</div><div class="line">                        <span class="keyword">var</span> match = img.url.match(<span class="regexp">/\/(sp\-[^\/]+)\//</span>);</div><div class="line">                        <span class="keyword">return</span> match ? match[<span class="number">1</span>] : <span class="literal">null</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;)</div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/24/webpack/" data-id="cj4hy1pf3001bdwx90s4t7toa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Emacs/">Emacs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MVVM-Vue/">MVVM Vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mobile/">Mobile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Perl/">Perl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Server/">Server</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/">Vim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/Emacs/" style="font-size: 10px;">Emacs</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/MVVM-Vue/" style="font-size: 10px;">MVVM Vue</a> <a href="/tags/Mobile/" style="font-size: 10px;">Mobile</a> <a href="/tags/Perl/" style="font-size: 10px;">Perl</a> <a href="/tags/React/" style="font-size: 15px;">React</a> <a href="/tags/Server/" style="font-size: 10px;">Server</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/06/26/react-isomorphic/">React同构</a>
          </li>
        
          <li>
            <a href="/2017/06/23/iterm2/">iterm2</a>
          </li>
        
          <li>
            <a href="/2017/06/18/node-debug/">NodeJs调试</a>
          </li>
        
          <li>
            <a href="/2017/06/16/react-start/">react 入门</a>
          </li>
        
          <li>
            <a href="/2017/06/12/iterm-commandline/">iterm-commandline</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 marong<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>