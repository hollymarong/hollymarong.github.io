<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>wepback学习笔记 | marong blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="webpack学习笔记1.css-loader是用来处理.css文件，style-loader是通过在页面中插入style标签处理样式1234//js文件中加载css文件require(&amp;apos;style-loader!css-loader!./hello.css&amp;apos;)//在命令行中通过module-bind处理css文件的加载webpack hello.js hello.bundle">
<meta name="keywords" content="webpack">
<meta property="og:type" content="article">
<meta property="og:title" content="wepback学习笔记">
<meta property="og:url" content="http://yoursite.com/2017/03/24/webpack/index.html">
<meta property="og:site_name" content="marong blog">
<meta property="og:description" content="webpack学习笔记1.css-loader是用来处理.css文件，style-loader是通过在页面中插入style标签处理样式1234//js文件中加载css文件require(&amp;apos;style-loader!css-loader!./hello.css&amp;apos;)//在命令行中通过module-bind处理css文件的加载webpack hello.js hello.bundle">
<meta property="og:updated_time" content="2017-05-09T02:05:12.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="wepback学习笔记">
<meta name="twitter:description" content="webpack学习笔记1.css-loader是用来处理.css文件，style-loader是通过在页面中插入style标签处理样式1234//js文件中加载css文件require(&amp;apos;style-loader!css-loader!./hello.css&amp;apos;)//在命令行中通过module-bind处理css文件的加载webpack hello.js hello.bundle">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">marong blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Less is more</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
  <a href="https://github.com/hollymarong"><img style="position: absolute; top: 0; right: 0; border: 0;z-index:2;" src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"></a>
</header>

      <div class="outer">
        <section id="main"><article id="post-webpack" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/24/webpack/" class="article-date">
  <time datetime="2017-03-24T11:55:59.000Z" itemprop="datePublished">2017-03-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      wepback学习笔记
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="webpack学习笔记"><a href="#webpack学习笔记" class="headerlink" title="webpack学习笔记"></a>webpack学习笔记</h3><p>1.css-loader是用来处理.css文件，style-loader是通过在页面中插入style标签处理样式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//js文件中加载css文件</div><div class="line">require(&apos;style-loader!css-loader!./hello.css&apos;)</div><div class="line">//在命令行中通过module-bind处理css文件的加载</div><div class="line">webpack hello.js hello.bundle.js --module-bind &apos;css=style-loader!css-loader&apos;</div></pre></td></tr></table></figure></p>
<p>2.命令行中参数<br>–module-bind 打包文件需要用到的loader<br>–watch 监听文件的变化并重新打包<br>–progress 显示打包进度<br>–display-modules 打包的所有的模块<br>–display-reason 模块打包原因</p>
<h3 id="webpack-config"><a href="#webpack-config" class="headerlink" title="webpack config"></a>webpack config</h3><p>*在项目中创建webpack.congfig.js文件，在命令行中运行webpack，会默认执行webpack.config.js中的配置，如果webpack的配置文件不是webpack.config.js,在命令行中则需要配置文件的名字<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//命令行</div><div class="line">webpack --config webpack.dev.config.js</div><div class="line">//可以用npm来给wepback执行的时候添加参数，在package.json</div><div class="line">&#123;</div><div class="line">	&apos;scripts&apos;:&#123;</div><div class="line">		&apos;webpack&apos;:&apos;webpack --config webpack.dev.config.js --progress --display-module --display-reasons --color&apos;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="webpack配置参数entry"><a href="#webpack配置参数entry" class="headerlink" title="webpack配置参数entry"></a>webpack配置参数entry</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//一个入口文件,entry的值为字符串</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	<span class="attr">entry</span>:<span class="string">'./src/script/main.js'</span>,</div><div class="line">	<span class="attr">output</span>:&#123;</div><div class="line">    	<span class="attr">path</span>:<span class="string">'./dist/js'</span>,</div><div class="line">	 	<span class="attr">filename</span>:<span class="string">'bundle.js'</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//多个入口文件,entry的值为数组，将main.js和a.js打包在一起，生成bundle.js</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	<span class="attr">entry</span>:[<span class="string">'./src/script/main.js'</span>,<span class="string">'./src/script/a.js'</span>],</div><div class="line">		  <span class="attr">output</span>:&#123;</div><div class="line">		  <span class="attr">path</span>:<span class="string">'./dist/js'</span>,</div><div class="line">		  <span class="attr">filename</span>:<span class="string">'bundle.js'</span></div><div class="line">		  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//多页面文件,entry的值为对象,name为entry中的key,hash为此次打包的hash值，chunkhash为文件的md5值，可以认为是文件的版本号</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">	<span class="attr">entry</span>:&#123;</div><div class="line">		<span class="string">"main"</span>:<span class="string">"./src/script/main.js"</span>,</div><div class="line">		<span class="string">"a"</span>:<span class="string">"./src/script/a.js"</span></div><div class="line">	&#125;,</div><div class="line">	<span class="attr">output</span>:&#123;</div><div class="line">		<span class="attr">path</span>:<span class="string">'./dist/js'</span>,</div><div class="line">		<span class="comment">//filename:'[name]-[hash].js'</span></div><div class="line">		filename:<span class="string">'[name]-[chunkhash].js'</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="自动化打包生成页面中的html，动态打包的文件名是不确定的"><a href="#自动化打包生成页面中的html，动态打包的文件名是不确定的" class="headerlink" title="自动化打包生成页面中的html，动态打包的文件名是不确定的"></a>自动化打包生成页面中的html，动态打包的文件名是不确定的</h3><p>利用webpack的html插件来解决<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div></pre></td><td class="code"><pre><div class="line">//安装html-webpack-plugin插件</div><div class="line">npm install html-webpack-plugin --save-dev</div><div class="line"></div><div class="line">//使用html-webpack-plugin插件,webpack.dev.config.js</div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">entry:&#123;</div><div class="line">main:&apos;./src/script/main.js&apos;,</div><div class="line">a:&apos;./src/script/a.js&apos;</div><div class="line">	  &#125;,</div><div class="line">output:&#123;</div><div class="line">path:&apos;./dist/js&apos;,</div><div class="line">filename:&apos;[name]-[chunkhash].js&apos;</div><div class="line">	   &#125;,</div><div class="line">plugins:[</div><div class="line">new htmlWebpackPlugin()</div><div class="line">]</div><div class="line">&#125;</div><div class="line">//此时执行npm run webpack 会在dist/js目录里生成一个引用a.js main.js的index.html文件，这个index.html并没有与项目根目录下创建的index.html有关联</div><div class="line"></div><div class="line">//关联根目录下的index.html</div><div class="line">module.exports = &#123;</div><div class="line">entry:&#123;</div><div class="line">main:&apos;./src/script/main.js&apos;,</div><div class="line">a:&apos;./src/script/a.js&apos;</div><div class="line">	  &#125;,</div><div class="line">output:&#123;</div><div class="line">path:&apos;./dist/js&apos;,</div><div class="line">filename:&apos;[name]-[chunkhash].js&apos;</div><div class="line">	   &#125;,</div><div class="line">plugins:[</div><div class="line">			new htmlWebpackPlugin(&#123;</div><div class="line">			template:&apos;index.html&apos;</div><div class="line">					&#125;)</div><div class="line">]</div><div class="line">&#125;</div><div class="line">// 打包后生成的index.html,a.js main.js都在dist/js/目录下，需要的目录结构应为</div><div class="line">dist---index.html js/a.js js/main.js,此时需要修改output的path，filenam配置</div><div class="line"></div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&#123;</div><div class="line">		&apos;main&apos;:&apos;./src/script/main.js&apos;,</div><div class="line">		&apos;a&apos;:&apos;./src/script/a.js&apos;</div><div class="line">	&#125;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name]-[chunkhash].js&apos;</div><div class="line">	&#125;,</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			filename:&apos;index-[hash].html&apos;,//指定文件的名字</div><div class="line">			template:&apos;index.html&apos;, //模板的名称</div><div class="line">			inject:&apos;head&apos;, //js插入的位置</div><div class="line">			title:&apos;webpack is good&apos;, //给模板index.html模板传递变量</div><div class="line">			date:new Date() //给模板传递date参数</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div><div class="line">//index.html引用htmlWebpackPlugin里的title</div><div class="line">&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</div><div class="line">&lt;body&gt;&lt;%= htmlWebpackPlugin.options.date %&gt;&lt;/body&gt;</div><div class="line"></div><div class="line">//在html中遍历出htmlWebpackPlugins的能获取的参数</div><div class="line"></div><div class="line">		&lt;div&gt;&lt;%= htmlWebpackPlugin.options.date %&gt;&lt;/div&gt;</div><div class="line">		&lt;% for(var key in htmlWebpackPlugin) &#123; %&gt;</div><div class="line">		&lt;%= key %&gt;</div><div class="line">		&lt;% &#125; %&gt;</div><div class="line"></div><div class="line">		&lt;% for (var key in htmlWebpackPlugin.files)&#123; %&gt;</div><div class="line">		&lt;%= key%&gt;: &lt;%= JSON.stringify(htmlWebpackPlugin.files[key]) %&gt;</div><div class="line">		&lt;% &#125; %&gt;</div><div class="line">		</div><div class="line">		&lt;% for (var key in htmlWebpackPlugin.options)&#123; %&gt;</div><div class="line">		&lt;%= key%&gt;: &lt;%= JSON.stringify(htmlWebpackPlugin.options[key]) %&gt;</div><div class="line">		&lt;% &#125; %&gt;</div><div class="line">		</div><div class="line">//htmlWebpackPlugin的key</div><div class="line">		files</div><div class="line">		</div><div class="line">		options</div><div class="line">	//htmlWebpackPlugin.files的key/value	</div><div class="line">		publicPath: &quot;&quot;</div><div class="line">		</div><div class="line">		chunks: &#123;&quot;main&quot;:&#123;&quot;size&quot;:26,&quot;entry&quot;:&quot;js/main-41d4982751088424227f.js&quot;,&quot;hash&quot;:&quot;41d4982751088424227f&quot;,&quot;css&quot;:[]&#125;,&quot;a&quot;:&#123;&quot;size&quot;:18,&quot;entry&quot;:&quot;js/a-4f55e4d7524c54cdeb7a.js&quot;,&quot;hash&quot;:&quot;4f55e4d7524c54cdeb7a&quot;,&quot;css&quot;:[]&#125;&#125;</div><div class="line">		</div><div class="line">		js: [&quot;js/main-41d4982751088424227f.js&quot;,&quot;js/a-4f55e4d7524c54cdeb7a.js&quot;]</div><div class="line">		</div><div class="line">		css: []</div><div class="line">		</div><div class="line">		manifest: </div><div class="line">		</div><div class="line">	//htmlWebpackPlugin.options的key/value	</div><div class="line">		</div><div class="line">		template: &quot;/home/marong/webpack-demo/node_modules/html-webpack-plugin/lib/loader.js!/home/marong/webpack-demo/index.html&quot;</div><div class="line">		</div><div class="line">		filename: &quot;index.html&quot;</div><div class="line">		</div><div class="line">		hash: false</div><div class="line">		</div><div class="line">		inject: &quot;head&quot;</div><div class="line">		</div><div class="line">		compile: true</div><div class="line">		</div><div class="line">		favicon: false</div><div class="line">		</div><div class="line">		minify: false</div><div class="line">		</div><div class="line">		cache: true</div><div class="line">		</div><div class="line">		showErrors: true</div><div class="line">		</div><div class="line">		chunks: &quot;all&quot;</div><div class="line">		</div><div class="line">		excludeChunks: []</div><div class="line">		</div><div class="line">		title: &quot;webpack is good&quot;</div><div class="line">		</div><div class="line">		xhtml: false</div><div class="line">		</div><div class="line">		date: &quot;2017-03-25T12:12:45.828Z&quot;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&#123;</div><div class="line">		&apos;main&apos;:&apos;./src/script/main.js&apos;,</div><div class="line">		&apos;a&apos;:&apos;./src/script/a.js&apos;</div><div class="line">	&#125;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name]-[chunkhash].js&apos;,</div><div class="line">		publicPath:&apos;http://cdn.com/js&apos; //上线打包地址占位,打包后生成的js文件地址是以此开头</div><div class="line">	&#125;,</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;index.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:fasle, //关闭自动注入js文件,手动在index.html中插入js</div><div class="line">			minify:&#123; //对html文件进行压缩</div><div class="line">			removeComments:true,//删除html中注释</div><div class="line">			collapseWhitespace:true //删除html中空格</div><div class="line">			&#125;,</div><div class="line">			title:&apos;webpack is good&apos;,</div><div class="line">			date:new Date()</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div><div class="line">//index.html</div><div class="line">&lt;head&gt;</div><div class="line">&lt;script src=&apos;&lt;%= htmlWebpackPlugin.chunks.main.entry&apos;&gt;&lt;/script&gt;</div><div class="line">&lt;script src=&apos;&lt;%= htmlWebpackPlugin.chunks.a.entry&apos;&gt;&lt;/script&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">//配置publicPath,生成的html</div><div class="line">&lt;script src=&quot;http://cdn.com/js/main-19a6af676da9ed429fb5.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script src=&quot;http://cdn.com/js/a-9b44f8a7189f4606479f.js&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="处理多页面应用的情况"><a href="#处理多页面应用的情况" class="headerlink" title="处理多页面应用的情况"></a>处理多页面应用的情况</h3><p>假设有a.html b.html c.html三个页面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">//webpack.dev.config.js配置</div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&#123;</div><div class="line">		&apos;main&apos;:&apos;./src/script/main.js&apos;,</div><div class="line">		&apos;a&apos;:&apos;./src/script/a.js&apos;,</div><div class="line">		&apos;b&apos;:&apos;./src/script/b.js&apos;,</div><div class="line">		&apos;c&apos;:&apos;./src/script/c.js&apos;</div><div class="line">	&#125;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name]-[chunkhash].js&apos;,</div><div class="line">		publicPath:&apos;http://cdn.com/&apos;</div><div class="line">	&#125;,</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;a.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:false, </div><div class="line">			title:&apos;This a.html&apos;,</div><div class="line">			date:new Date()</div><div class="line">		&#125;),</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;b.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:false, </div><div class="line">			title:&apos;This is b.html&apos;,</div><div class="line">			date:new Date()</div><div class="line">		&#125;),</div><div class="line"></div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;c.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:false, </div><div class="line">			title:&apos;This is c.html&apos;,</div><div class="line">			date:new Date()</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div><div class="line"></div><div class="line">//index.html模板中js都固定引入chunks.a.entry,所以生成的三个页面都会有a.js</div><div class="line">//解决方案，可以在webpack配置文件中传递变量给模板，模板来判断引入哪个js,</div><div class="line">//这种方式比较麻烦.html-webpack-plugin中能设置chunks的传递值(默认传递所有的chunks),只传递对当前页面有用的chunks</div><div class="line"></div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;</div><div class="line">		&lt;meta charset=&apos;utf-8&apos;&gt;</div><div class="line">		&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</div><div class="line">		&lt;script src=&quot;&lt;%= htmlWebpackPlugin.files.chunks.main.entry %&gt;&quot;&gt;&lt;/script&gt;</div><div class="line">		&lt;script src=&quot;&lt;%= htmlWebpackPlugin.files.chunks.a.entry %&gt;&quot;&gt;&lt;/script&gt;</div><div class="line">	&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;!-- 文章主体start --&gt;</div><div class="line">		&lt;h1&gt;webpack title&lt;/h1&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<h3 id="多页面应用通过设置chunks参数，不同页面通过同一个模板加载相应的js文件"><a href="#多页面应用通过设置chunks参数，不同页面通过同一个模板加载相应的js文件" class="headerlink" title="多页面应用通过设置chunks参数，不同页面通过同一个模板加载相应的js文件"></a>多页面应用通过设置chunks参数，不同页面通过同一个模板加载相应的js文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">//webpack.dev.config.js</div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&#123;</div><div class="line">		&apos;main&apos;:&apos;./src/script/main.js&apos;,</div><div class="line">		&apos;a&apos;:&apos;./src/script/a.js&apos;,</div><div class="line">		&apos;b&apos;:&apos;./src/script/b.js&apos;,</div><div class="line">		&apos;c&apos;:&apos;./src/script/c.js&apos;</div><div class="line">	&#125;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name]-[chunkhash].js&apos;,</div><div class="line">		publicPath:&apos;http://cdn.com/&apos;</div><div class="line">	&#125;,</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;a.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:true,//打开自动注入js</div><div class="line">			title:&apos;This a.html&apos;,</div><div class="line">			chunks:[&apos;main&apos;,&apos;a&apos;] //对a.html有用的chunks</div><div class="line">			//excludeChunks:[&apos;b&apos;,&apos;c&apos;]//如果页面中需要加载大多数chunks,可以采用排除的方式,排除当前页面不需要的chunks</div><div class="line">		&#125;),</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;b.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:true, </div><div class="line">			title:&apos;This is b.html&apos;,</div><div class="line">			chunks:[&apos;b&apos;]</div><div class="line">		&#125;),</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			//filename:&apos;index-[hash].html&apos;,</div><div class="line">			filename:&apos;c.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:true, </div><div class="line">			title:&apos;This is c.html&apos;,</div><div class="line">			chunks:[&apos;c&apos;]</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div><div class="line">//index.html</div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;</div><div class="line">		&lt;meta charset=&apos;utf-8&apos;&gt;</div><div class="line">		&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</div><div class="line">	&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;!-- 文章主体start --&gt;</div><div class="line">		&lt;h1&gt;webpack title&lt;/h1&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h3 id="如果追求页面的性能，减少http的请求数，想在页面中以inline的形式插入js"><a href="#如果追求页面的性能，减少http的请求数，想在页面中以inline的形式插入js" class="headerlink" title="如果追求页面的性能，减少http的请求数，想在页面中以inline的形式插入js"></a>如果追求页面的性能，减少http的请求数，想在页面中以inline的形式插入js</h3><p>html-webpack-plugin的作者给出了解决方法，在<a href="https://github.com/jantimon/html-webpack-plugin/blob/master/examples/inline/template.jade" target="_blank" rel="external">https://github.com/jantimon/html-webpack-plugin/blob/master/examples/inline/template.jade</a><br>中，利用webpack暴露出的变量compilation.assets在页面中插入chunks中的entry,由于webpack配置了publicPath，chunk的ernty都带着publicPath,<br>compilation.assert中存储的是不带publicPath的entry<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;</div><div class="line">		&lt;meta charset=&apos;utf-8&apos;&gt;</div><div class="line">		&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</div><div class="line">		&lt;script&gt;</div><div class="line">&lt;%= compilation.assets[htmlWebpackPlugin.files.main.entry.substr(htmlWebpackPlugin.files.publicPath.length)].source() %&gt;</div><div class="line">		&lt;/script&gt;</div><div class="line">	&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;!-- 文章主体start --&gt;</div><div class="line">		&lt;h1&gt;webpack title&lt;/h1&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<h3 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h3><p>处理资源文件，返回新的资源。<br>loader的处理方式有三种，require加载文件相应文件的时，在webpack配置文件里，在命令行里。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">//require的时候</div><div class="line">require(&apos;style-loader!css-loader!./src/style/common.css&apos;)</div><div class="line">//webpack的配置文件</div><div class="line">&#123;</div><div class="line">module:&#123;</div><div class="line">loaders:[</div><div class="line">		&#123;</div><div class="line">		test:/\.jade$/,loader:&quot;jade&quot;</div><div class="line">		&#125;,</div><div class="line">		&#123;</div><div class="line">		test:/\.css$/,loader:&apos;style!css&apos;</div><div class="line">		&#125;,</div><div class="line">		&#123;</div><div class="line">		test:/\.css$/, loaders:[&quot;style&quot;,&quot;css&quot;]</div><div class="line">		&#125;</div><div class="line">]</div><div class="line">	   &#125;</div><div class="line">&#125;</div><div class="line">//命令行列</div><div class="line">webpack --module-bind jade --module-bind &apos;css=style!css&apos;</div></pre></td></tr></table></figure></p>
<h3 id="webpack-babel"><a href="#webpack-babel" class="headerlink" title="webpack babel"></a>webpack babel</h3><p>处理es6语法，es6每年都会修订，es2015/es2016/es2017,latest插件包含所有特性(es2015/es2016/es2017)<br>通过preset设置babel-loader转换特性,插件需要通过npm来安装<br>给babel指定参数有四种方式，一种是在babel-loader后直接跟参数，一种是在webpack配置文件中通过query设置,<br>还可以通过创建.babelrc配置文件,在package.json中配置babel</p>
<p>设置babel-loader， exclude,include时候，需要绝对路径，并且同时设置，不然会报错<br>couldn’t find preset latest<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">//安装babel</div><div class="line">npm install --save-dev babel-loader bable-core</div><div class="line">//安装latest插件</div><div class="line">inpm install --save-dev  bable-preset-latest</div><div class="line">//babel-loader直接跟参数</div><div class="line">//配置文件中设置参数</div><div class="line"></div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">var path  = require(&apos;path&apos;);</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&apos;./src/app.js&apos;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name].bundle.js&apos;</div><div class="line">	&#125;,</div><div class="line">	module:&#123;</div><div class="line">		loaders:[</div><div class="line">			&#123;</div><div class="line">				test:/\.js$/,</div><div class="line">				loader:&apos;babel&apos;,</div><div class="line">				exclude:path.resolve(__dirname, &apos;node_modules&apos;),//排除babel-loader编译文件夹</div><div class="line">				include:path.resolve(__dirname, &apos;src&apos;),//babel-loader很耗时，指定编译的文件夹</div><div class="line">				query:&#123;</div><div class="line">					presets:[&quot;latest&quot;]</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		]</div><div class="line">	&#125;,</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			filename:&apos;index.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:&apos;body&apos;</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div><div class="line"></div><div class="line">//.babelrc配置文件</div><div class="line">&#123;</div><div class="line">&quot;presets&quot;:[&quot;latest&quot;]</div><div class="line">&#125;</div><div class="line">//package.json配置babel</div><div class="line"></div><div class="line">  &quot;babel&quot;:&#123;</div><div class="line">	  &quot;presets&quot;:[&quot;latest&quot;]</div><div class="line">  &#125;,</div></pre></td></tr></table></figure></p>
<h3 id="webpack处理css"><a href="#webpack处理css" class="headerlink" title="webpack处理css"></a>webpack处理css</h3><ul>
<li>postcss-loader css后处理loader，postcss常用插件autoprefixer<br><em>style-loader css-loader  post-css
</em>如果在css文件中@import ‘common.css’, webpack会用style-loader,css-loader处理，但不会用postcss-loader来处理，<br>并把通过import引入的css新建一个style标签来插入到页面中<br>需要css-loader配置参数,importLoaders=num,设置在css-loader之后，指定几个数量的loader来处理import的css<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev style-loader css-loader postcss-loader autoprefixer</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">//webpack.dev.config.js</div><div class="line"></div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">var path  = require(&apos;path&apos;);</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&apos;./src/app.js&apos;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name].bundle.js&apos;</div><div class="line">	&#125;,</div><div class="line">	module:&#123;</div><div class="line">		loaders:[</div><div class="line">			&#123;</div><div class="line">				test:/\.js$/,</div><div class="line">				loader:&apos;babel&apos;,</div><div class="line">				exclude:path.resolve(__dirname, &apos;node_modules&apos;),</div><div class="line">				include:path.resolve(__dirname, &apos;src&apos;),</div><div class="line">				query:&#123;</div><div class="line">					presets:[&quot;latest&quot;]</div><div class="line">				&#125;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.css$/,</div><div class="line">				loader:&apos;style-loader!css-loader?importLoaders=1!postcss-loader&apos;</div><div class="line">			&#125;</div><div class="line">		]</div><div class="line">	&#125;,</div><div class="line">	//postcss:function()&#123;//postcss是数组，填写postcss-loader需要的插件，必填也可直接写成一个数组的格式</div><div class="line">		//return [</div><div class="line">			//require(&apos;autoprefixer&apos;)(&#123;</div><div class="line">				//broswers:[&apos;last 5 versions&apos;]</div><div class="line">			//&#125;)</div><div class="line">		//]</div><div class="line">	//&#125;,</div><div class="line">	postcss:[</div><div class="line">		require(&apos;autoprefixer&apos;)(&#123;</div><div class="line">			broswers:[&apos;last 5 versions&apos;]</div><div class="line">		&#125;)</div><div class="line">	],</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			filename:&apos;index.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:&apos;body&apos;</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="webpack-处理less-sass文件"><a href="#webpack-处理less-sass文件" class="headerlink" title="webpack 处理less sass文件"></a>webpack 处理less sass文件</h3><p>如果是less文件中import less文件，能正常编译，不需要给css-loader配置importLoaders参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install less less-loader sass-loader --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//webpack 配置</div><div class="line">	module:&#123;</div><div class="line">		loaders:[</div><div class="line">			&#123;</div><div class="line">				test:/\.js$/,</div><div class="line">				loader:&apos;babel&apos;,</div><div class="line">				exclude:path.resolve(__dirname, &apos;node_modules&apos;),</div><div class="line">				include:path.resolve(__dirname, &apos;src&apos;),</div><div class="line">				query:&#123;</div><div class="line">					presets:[&quot;latest&quot;]</div><div class="line">				&#125;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.css$/,</div><div class="line">				loader:&apos;style-loader!css-loader?importLoaders=1!postcss-loader&apos;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.less/,</div><div class="line">				//loader:&apos;style-loader!css-loader!postcss-loader!less-loader&apos;</div><div class="line">				loader:&apos;style!css!postcss!less&apos;//可以省略-loader</div><div class="line">			&#125;</div><div class="line">		]</div><div class="line">	&#125;,</div></pre></td></tr></table></figure>
<h3 id="webpack-处理项目中的模板文件"><a href="#webpack-处理项目中的模板文件" class="headerlink" title="webpack 处理项目中的模板文件"></a>webpack 处理项目中的模板文件</h3><p>*有多种模板文件loader, html-loader, ejs-loader<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//html-loader把模板处理为字符串</div><div class="line">npm install --save-dev html-loader ejs-loader</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line">//html</div><div class="line"></div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;</div><div class="line">		&lt;meta charset=&apos;utf-8&apos;&gt;</div><div class="line">		&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</div><div class="line">	&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;!-- 文章主体start --&gt;</div><div class="line">		&lt;h1&gt;webpack title&lt;/h1&gt;</div><div class="line">		&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line">//lader.html</div><div class="line"></div><div class="line">&lt;div class=&quot;layer&quot;&gt;</div><div class="line">	&lt;div&gt;This is a layer&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">//layer.tpl</div><div class="line"></div><div class="line">&lt;div class=&quot;layer&quot;&gt;</div><div class="line">	&lt;div&gt;&lt;%= name %&gt;&lt;/div&gt;</div><div class="line">	&lt;% for (var i = 0; i &lt; arr.length;i++) &#123;%&gt;</div><div class="line">&lt;%= arr[i] %&gt;</div><div class="line">	&lt;% &#125; %&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">//layer.js</div><div class="line"></div><div class="line">//import tpl from &apos;./layer.html&apos;;</div><div class="line">import tpl from &apos;./layer.tpl&apos;;</div><div class="line">import &apos;./layer.less&apos;;</div><div class="line">function layer()&#123;</div><div class="line">	return &#123;</div><div class="line">		name:&apos;layer&apos;,</div><div class="line">		tpl:tpl</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">export default layer;</div><div class="line">//app.js</div><div class="line"></div><div class="line">import &apos;./css/common.css&apos;;</div><div class="line">import Layer from &apos;./components/layer/layer.js&apos;;</div><div class="line">const App = function()&#123;</div><div class="line">	var layer = new Layer();</div><div class="line">	var app = document.getElementById(&apos;app&apos;);</div><div class="line">	//html string</div><div class="line">	app.innerHTML = layer.tpl;</div><div class="line">	//ejs function </div><div class="line">	app.innerHTML = layer.tpl(&#123;</div><div class="line">		name:&apos;ejs&apos;,</div><div class="line">		arr:[&apos;tpl&apos;,&apos;html&apos;, &apos;loader&apos;]</div><div class="line">	&#125;)</div><div class="line"></div><div class="line">&#125;</div><div class="line">new App();</div><div class="line">//wepback配置文件</div><div class="line"></div><div class="line">var htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">var path  = require(&apos;path&apos;);</div><div class="line">module.exports = &#123;</div><div class="line">	entry:&apos;./src/app.js&apos;,</div><div class="line">	output:&#123;</div><div class="line">		path:&apos;./dist&apos;,</div><div class="line">		filename:&apos;js/[name].bundle.js&apos;</div><div class="line">	&#125;,</div><div class="line">	module:&#123;</div><div class="line">		loaders:[</div><div class="line">			&#123;</div><div class="line">				test:/\.js$/,</div><div class="line">				loader:&apos;babel&apos;,</div><div class="line">				exclude:path.resolve(__dirname, &apos;node_modules&apos;),</div><div class="line">				include:path.resolve(__dirname, &apos;src&apos;),</div><div class="line">				query:&#123;</div><div class="line">					presets:[&quot;latest&quot;]</div><div class="line">				&#125;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.css$/,</div><div class="line">				loader:&apos;style-loader!css-loader?importLoaders=1!postcss-loader&apos;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.less$/,</div><div class="line">				//loader:&apos;style-loader!css-loader!postcss-loader!less-loader&apos;</div><div class="line">				loader:&apos;style!css!postcss!less&apos;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.tpl/,</div><div class="line">				loader:&apos;ejs-loader&apos;</div><div class="line">			&#125;,</div><div class="line">			&#123;</div><div class="line">				test:/\.html$/,</div><div class="line">				loader:&apos;html-loader&apos;</div><div class="line">			&#125;</div><div class="line">		]</div><div class="line">	&#125;,</div><div class="line">	//postcss:function()&#123;</div><div class="line">		//return [</div><div class="line">			//require(&apos;autoprefixer&apos;)(&#123;</div><div class="line">				//broswers:[&apos;last 5 versions&apos;]</div><div class="line">			//&#125;)</div><div class="line">		//]</div><div class="line">	//&#125;,</div><div class="line">	postcss:[</div><div class="line">		require(&apos;autoprefixer&apos;)(&#123;</div><div class="line">			broswers:[&apos;last 5 versions&apos;]</div><div class="line">		&#125;)</div><div class="line">	],</div><div class="line">	plugins:[</div><div class="line">		new htmlWebpackPlugin(&#123;</div><div class="line">			filename:&apos;index.html&apos;,</div><div class="line">			template:&apos;index.html&apos;,</div><div class="line">			inject:&apos;body&apos;</div><div class="line">		&#125;)</div><div class="line">	]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="webpack-处理图片及其他文件"><a href="#webpack-处理图片及其他文件" class="headerlink" title="webpack 处理图片及其他文件"></a>webpack 处理图片及其他文件</h3><p>file-loader 处理图片<br>url-loader 当图片大小小于limit的时候，转为base64,大于limit的时候，交由file-loader处理<br>image-webpack-loader 压缩图片大小，与file-loader,url-loader配合使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev file-loader url-loader image-webpack-loader</div><div class="line"></div><div class="line">			&#123;</div><div class="line">				test:/\.(jpg|png|svg|gif)/i,</div><div class="line">				//loader:&apos;file-loader&apos;,</div><div class="line">				//query:&#123;</div><div class="line">				//	name:&apos;assets/[name]-[hash:5].[ext]&apos;</div><div class="line">				//&#125;</div><div class="line">				//loader:&apos;url-loader&apos;,</div><div class="line">				//query:&#123;</div><div class="line">				//	limit:100000,</div><div class="line">				//	name:&apos;assets/[name]-[hash:5].[ext]&apos;</div><div class="line">				//&#125;</div><div class="line">				loaders:[</div><div class="line">					&apos;url-loader?limit=100000&amp;name=assets/[name]-[hash-5].[ext]&apos;,</div><div class="line">					&apos;image-webpack&apos;</div><div class="line">				]</div><div class="line">			&#125;</div></pre></td></tr></table></figure></p>
<h3 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h3><ul>
<li>webpack-dev-server是一个小型Node.js Express服务器，它使用webpack-dev-middleware中间件来为通过wepback打包生成的资源文件提供web服务。它还有一个通过Socket.IO连接着webpack-dev-server服务器的小型运行时程序。</li>
<li>publicPath</li>
<li>启动webpack-dev-server后，目标文件中看不到编译后的文件，实时编译后的文件都保存到了内存中。</li>
</ul>
<h3 id="postcss-sprites-自动拼合图片"><a href="#postcss-sprites-自动拼合图片" class="headerlink" title="postcss-sprites 自动拼合图片"></a>postcss-sprites 自动拼合图片</h3><p>能自动拼合图片，能生成单个或多个sprites图片，并能自动输出图片的大小<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev postcss-sprites</div></pre></td></tr></table></figure></p>
<p>配置如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line">var postcss = require(&apos;postcss&apos;)</div><div class="line">var postcssSprites = require(&apos;postcss-sprites&apos;)</div><div class="line">var postcssAssets = require(&apos;postcss-assets&apos;)</div><div class="line">var postcssNext = require(&apos;postcss-cssnext&apos;)</div><div class="line">var updateRule = require(&apos;postcss-sprites/lib/core&apos;).updateRule;</div><div class="line"></div><div class="line">        new webpack.LoaderOptionsPlugin(&#123;</div><div class="line">            options: &#123;</div><div class="line">                postcss:function()&#123;</div><div class="line">                    return [</div><div class="line">                        postcssAssets(&#123;</div><div class="line">                            loadPaths: [&apos;./src/images/&apos;],</div><div class="line">                            relative: true</div><div class="line">                        &#125;),</div><div class="line">                        postcssNext(&#123;//代替autoprefixer</div><div class="line">                            browsers: [&quot;&gt; 1%&quot;, &quot;last 2 version&quot;, &quot;Android &gt;= 4.0&quot;]</div><div class="line">                        &#125;),</div><div class="line">                        postcssSprites(&#123;</div><div class="line">                        //需要处理样式表的文件夹</div><div class="line">                            stylesheetPath: &apos;./src/css&apos;,</div><div class="line">                            //生成sprites图片的文件夹</div><div class="line">                            spritePath: &apos;./src/images/outputsprite&apos;,</div><div class="line">                            outputDimensions: true,</div><div class="line">                            skipPrefix: true,</div><div class="line">                            //过滤需要合并的图片</div><div class="line">                            filterBy: function(image) &#123;</div><div class="line">		                            if (!/sprite/.test(image.url)) &#123;</div><div class="line">			                              return Promise.reject();</div><div class="line">		                            &#125;</div><div class="line"></div><div class="line">		                            return Promise.resolve();</div><div class="line">	                          &#125;,</div><div class="line">                              //可以根据匹配规则，合并某组文件为一个sprites</div><div class="line">                            groupBy: function(image) &#123;</div><div class="line">                            //图片文件名中有shapes合并为一个sprite.shape.png</div><div class="line">		                            // if (image.url.indexOf(&apos;shapes&apos;) === -1) &#123;</div><div class="line">			                          //     return Promise.reject(new Error(&apos;Not a shape image.&apos;));</div><div class="line">		                            // &#125;</div><div class="line"></div><div class="line">		                            // return Promise.resolve(&apos;shapes&apos;);</div><div class="line">                                    //根据文件夹拼合一组图片，如果有/images/sprites/index   /images/sprites/login 这两个文件夹，会生成三张图片，sprites.index.png,sprites.login.png, sprites.other.png 三张图片</div><div class="line"></div><div class="line">                                let groups = /\/images\/sprites\/(.*?)\/.*/gi.exec(image.url);</div><div class="line">                                let groupName = groups ? groups[1] : &apos;other&apos;;</div><div class="line">                                image.retina = true;</div><div class="line">                                image.ratio = 1;</div><div class="line">                                if (groupName) &#123;</div><div class="line">                                    let ratio = /@(\d+)x$/gi.exec(groupName);</div><div class="line">                                    if (ratio) &#123;</div><div class="line">                                        ratio = ratio[1];</div><div class="line">                                        while (ratio &gt; 10) &#123;</div><div class="line">                                            ratio = ratio / 10;</div><div class="line">                                        &#125;</div><div class="line">                                        image.ratio = ratio;</div><div class="line">                                    &#125;</div><div class="line">                                &#125;</div><div class="line">                                return Promise.resolve(groupName);</div><div class="line">	                          &#125;,</div><div class="line">	                          hooks: &#123;</div><div class="line">                              //onUpdateRule控制输入到css的内容，下面的代码回在生成的css中带有图片的宽高</div><div class="line">		                            onUpdateRule: function(rule, token, image) &#123;</div><div class="line">			                              // Use built-in logic for background-image &amp; background-position</div><div class="line">			                              updateRule(rule, token, image);</div><div class="line"></div><div class="line">			                              [&apos;width&apos;, &apos;height&apos;].forEach(function(prop) &#123;</div><div class="line">				                                var value = image.coords[prop];</div><div class="line">				                                if (image.retina) &#123;</div><div class="line">					                                  value /= image.ratio;</div><div class="line">				                                &#125;</div><div class="line">				                                rule.insertAfter(rule.last, postcss.decl(&#123;</div><div class="line">					                                  prop: prop,</div><div class="line">					                                  value: value + &apos;px&apos;</div><div class="line">				                                &#125;));</div><div class="line">			                              &#125;);</div><div class="line">		                            &#125;</div><div class="line">	                          &#125;</div><div class="line">                        &#125;)</div><div class="line">                    ]</div><div class="line">                &#125;,</div></pre></td></tr></table></figure></p>
<h3 id="extract-text-webpack-plugin"><a href="#extract-text-webpack-plugin" class="headerlink" title="extract-text-webpack-plugin"></a>extract-text-webpack-plugin</h3><p>把样式单独打包成一个样式文件,并插入到页面中原来注入style标签的位置,对css、less、sass文件配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">var ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;)</div><div class="line">var ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;)</div><div class="line"></div><div class="line">var DeployFtpWebpackPlugin = require(&apos;./deploy.plugin&apos;);</div><div class="line">// process.traceDeprecation = true;</div><div class="line">module.exports = &#123;</div><div class="line">    entry:&apos;./src/main.js&apos;,</div><div class="line">    output:&#123;</div><div class="line">        path: path.resolve(__dirname, &apos;dist&apos;),</div><div class="line">        filename: &apos;bundle-[hash].js&apos;</div><div class="line">    &#125;,</div><div class="line">    module: &#123;</div><div class="line">        rules: [</div><div class="line">            &#123;</div><div class="line">                test:/\.js$/,</div><div class="line">                loader:&apos;babel-loader&apos;,</div><div class="line">                exclude: /node_modules/</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test:/\.css$/,</div><div class="line">                use: ExtractTextPlugin.extract(&#123;</div><div class="line">                    fallback: &apos;style-loader&apos;,</div><div class="line">                    use:&apos;css-loader?importLoaders=1!postcss-loader&apos;</div><div class="line">                &#125;)</div><div class="line">                // loader: &apos;style-loader!css-loader?importLoaders=1!postcss-loader&apos;</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test:/\.scss/,</div><div class="line">                use: ExtractTextPlugin.extract(&#123;</div><div class="line">                    fallback: &apos;style-loader&apos;,</div><div class="line">                    use: &apos;css-loader!postcss-loader!sass-loader&apos;</div><div class="line">                &#125;)</div><div class="line">                // loader:&apos;style-loader!css-loader!postcss-loader!sass-loader&apos;</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                test:/\.(jpg|png|svg|gif)$/,</div><div class="line">                loader: &apos;url-loader&apos;,</div><div class="line">                query: &#123;</div><div class="line">                    limit:10,</div><div class="line">                    name: &apos;assets/[name]-[hash:5].[ext]&apos;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;,</div><div class="line">    plugins: [</div><div class="line">        new ExtractTextPlugin(&quot;style.css&quot;),</div><div class="line">        ...</div></pre></td></tr></table></figure></p>
<h3 id="第三方库不打包处理-webpack-IgnorePlugin"><a href="#第三方库不打包处理-webpack-IgnorePlugin" class="headerlink" title="第三方库不打包处理,webpack.IgnorePlugin"></a>第三方库不打包处理,webpack.IgnorePlugin</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var ignoreFiles = new Webpack,IgnorePlugin(/\/jquery.js$/);</div><div class="line">module.exports = &#123;</div><div class="line">plugins: [ignoreFiles]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="提取多入口文件中公共的代码，打包成一个独立的文件webpack-optimize-CommonsChunkPlugin"><a href="#提取多入口文件中公共的代码，打包成一个独立的文件webpack-optimize-CommonsChunkPlugin" class="headerlink" title="提取多入口文件中公共的代码，打包成一个独立的文件webpack.optimize.CommonsChunkPlugin"></a>提取多入口文件中公共的代码，打包成一个独立的文件webpack.optimize.CommonsChunkPlugin</h3><ol>
<li>可以提取多入口文件中公共的代码<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">entry:&#123;</div><div class="line">    main:&apos;./src/main.js&apos;,</div><div class="line">    main2:&apos;./src/main2.js&apos;,</div><div class="line">    vender:Object.keys(packageJson.dependencies)</div><div class="line">&#125;,</div><div class="line">...</div><div class="line">    new webpack.optimize.CommonsChunkPlugin(&#123;</div><div class="line">        name:&apos;common&apos;,</div><div class="line">        filename:&apos;common.js&apos;,</div><div class="line">        chunks: [&apos;main&apos;, &apos;main2&apos;]</div><div class="line">    &#125;),</div><div class="line">    //最后会生成三个文件common.js main.js main2.js vender.js</div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="webpack-optimize-OccurenceOrderPlugin"><a href="#webpack-optimize-OccurenceOrderPlugin" class="headerlink" title="webpack.optimize.OccurenceOrderPlugin"></a>webpack.optimize.OccurenceOrderPlugin</h4><ul>
<li>给组件分配ID，通过这个插件webpack可以分析考虑使用最多的模块，并未他们分配最小的ID<br>在webpack2中改为webpack.optimize.OcurrenceOrderPlugin,在webpack2中默认开启,不用在配置文件中写 </li>
</ul>
<p>plugins: [<br>    // webpack 1</p>
<ul>
<li>new webpack.optimize.OccurenceOrderPlugin()<br>// webpack 2</li>
<li>new webpack.optimize.OccurrenceOrderPlugin()<br>]</li>
</ul>
<h3 id="wepback-optimize-UglifyJsPlugin压缩JS代码"><a href="#wepback-optimize-UglifyJsPlugin压缩JS代码" class="headerlink" title="wepback.optimize.UglifyJsPlugin压缩JS代码"></a>wepback.optimize.UglifyJsPlugin压缩JS代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install uglifyjs-webpack-plugin --save-dev</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h3 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h3><ol>
<li>配置loader时不能省略-loader</li>
<li>postcss配置报错，在webpack2中不能包含自定义配置项来配置loader，postcss用LoaderOptionsPlugin来给loader配置<br>报错信息<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">Invalid configuration object. Webpack has been initialised using a configuration object that does not match the API schema.</div><div class="line"> - configuration has an unknown property <span class="string">'postcss'</span>. These properties are valid:</div><div class="line">   object &#123; amd?, bail?, cache?, context?, dependencies?, devServer?, devtool?, entry, externals?, loader?, module?, name?, node?, output?, performance?, plugins?, profile?, recordsInputPath?, recordsOutputPath?, recordsPath?, resolve?, resolveLoader?, stats?, target?, watch?, watchOptions? &#125;</div><div class="line">   For typos: please correct them.</div><div class="line">   For loader options: webpack 2 no longer allows custom properties <span class="keyword">in</span> configuration.</div><div class="line">     Loaders should be updated to allow passing options via loader options <span class="keyword">in</span> module.rules.</div><div class="line">     Until loaders are updated one can use the LoaderOptionsPlugin to pass these options to the loader:</div><div class="line">     plugins: [</div><div class="line">       new webpack.LoaderOptionsPlugin(&#123;</div><div class="line">         // <span class="built_in">test</span>: /\.xxx$/, // may apply this only <span class="keyword">for</span> some modules</div><div class="line">         options: &#123;</div><div class="line">           postcss: ...</div><div class="line">         &#125;</div><div class="line">       &#125;)</div><div class="line">     ]</div></pre></td></tr></table></figure>
</li>
</ol>
<p>webpack2中需替换为<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> webpack.LoaderOptionsPlugin(&#123;</div><div class="line">    <span class="attr">options</span>: &#123;</div><div class="line">        <span class="attr">postcss</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> [</div><div class="line">                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123;</div><div class="line">                    <span class="attr">broswers</span>:[<span class="string">'last 5 version'</span>]</div><div class="line">                &#125;),</div><div class="line">                <span class="built_in">require</span>(<span class="string">'postcss-assets'</span>)(&#123;</div><div class="line">                    <span class="attr">loadPaths</span>: [<span class="string">'./src/images/'</span>],</div><div class="line">                    <span class="attr">relative</span>: <span class="literal">true</span></div><div class="line">                &#125;),</div><div class="line">                <span class="built_in">require</span>(<span class="string">"postcss-cssnext"</span>)(&#123;</div><div class="line">                    <span class="attr">browsers</span>: [<span class="string">"&gt; 1%"</span>, <span class="string">"last 2 version"</span>, <span class="string">"Android &gt;= 4.0"</span>]</div><div class="line">                &#125;),</div><div class="line">                <span class="built_in">require</span>(<span class="string">'postcss-sprites'</span>)(&#123;</div><div class="line">                    <span class="attr">stylesheetPath</span>: <span class="string">'./src/css'</span>,</div><div class="line">                    <span class="attr">spritePath</span>: <span class="string">'./src/images/sprite.png'</span>,</div><div class="line">                    <span class="attr">outputDimensions</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">skipPrefix</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">filterBy</span>: <span class="function"><span class="keyword">function</span>(<span class="params">img</span>) </span>&#123;</div><div class="line">                        <span class="keyword">return</span> <span class="regexp">/\/sp\-/</span>.test(img.url);</div><div class="line">                    &#125;,</div><div class="line">                    <span class="attr">groupBy</span>: <span class="function"><span class="keyword">function</span>(<span class="params">img</span>) </span>&#123;</div><div class="line">                        <span class="keyword">var</span> match = img.url.match(<span class="regexp">/\/(sp\-[^\/]+)\//</span>);</div><div class="line">                        <span class="keyword">return</span> match ? match[<span class="number">1</span>] : <span class="literal">null</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;)</div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/24/webpack/" data-id="cj2zlj5ak0011hhx9gk88o16z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/04/11/closure/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          闭包
        
      </div>
    </a>
  
  
    <a href="/2017/03/24/setTimeout/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">定时器</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Emacs/">Emacs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Perl/">Perl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Server/">Server</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/">Vim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/Emacs/" style="font-size: 10px;">Emacs</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/Perl/" style="font-size: 10px;">Perl</a> <a href="/tags/Server/" style="font-size: 10px;">Server</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/algorithm/" style="font-size: 10px;">algorithm</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/05/22/jsEqualOperator/">Javascript相等操作符</a>
          </li>
        
          <li>
            <a href="/2017/05/22/cssMarginPaddingPercentage/">CSS margin/padding值的计算</a>
          </li>
        
          <li>
            <a href="/2017/05/10/mac-commandline/">mac-commandline</a>
          </li>
        
          <li>
            <a href="/2017/04/30/perlstart/">Perl入门</a>
          </li>
        
          <li>
            <a href="/2017/04/26/box-model/">box-model</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 marong<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>